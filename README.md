# MetaSpeekOJ - åœ¨çº¿åˆ¤é¢˜ç³»ç»Ÿ

## é¡¹ç›®æ¦‚è¿°

MetaSpeekOJ æ˜¯ä¸€ä¸ªåŸºäº Django + Vue.js çš„ç°ä»£åŒ–åœ¨çº¿åˆ¤é¢˜ç³»ç»Ÿï¼Œä¸“æ³¨äºæä¾›é«˜æ•ˆã€ç¨³å®šçš„ç¼–ç¨‹ç«èµ›å’Œæ•™å­¦å¹³å°ã€‚ç³»ç»Ÿæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼Œæä¾›å®Œæ•´çš„é¢˜ç›®ç®¡ç†ã€ç”¨æˆ·ç®¡ç†ã€æ¯”èµ›ç®¡ç†ç­‰åŠŸèƒ½ã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸš€ **é«˜æ€§èƒ½æ¶æ„**: Django REST Framework + Vue.js å‰åç«¯åˆ†ç¦»
- ğŸ“ **å¤šè¯­è¨€æ”¯æŒ**: C/C++, Java, Python, Go ç­‰ä¸»æµç¼–ç¨‹è¯­è¨€
- ğŸ¯ **æ™ºèƒ½åˆ¤é¢˜**: æ”¯æŒç‰¹æ®Šåˆ¤é¢˜ã€äº¤äº’å¼åˆ¤é¢˜ç­‰å¤šç§åˆ¤é¢˜æ¨¡å¼
- ğŸ“Š **æ•°æ®ç»Ÿè®¡**: å®Œæ•´çš„æäº¤ç»Ÿè®¡ã€ç”¨æˆ·æ’åã€æ¯”èµ›åˆ†æ
- ğŸ” **æƒé™ç®¡ç†**: ç»†ç²’åº¦çš„ç”¨æˆ·æƒé™æ§åˆ¶
- ğŸ¨ **ç°ä»£åŒ–UI**: å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨ç«¯è®¿é—®

## æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯
- **æ¡†æ¶**: Django 3.2+ / Django REST Framework
- **æ•°æ®åº“**: PostgreSQL / MySQL
- **ç¼“å­˜**: Redis
- **æ¶ˆæ¯é˜Ÿåˆ—**: Celery
- **å®¹å™¨åŒ–**: Docker / Docker Compose

### å‰ç«¯æŠ€æœ¯
- **æ¡†æ¶**: Vue.js 2.x
- **UIåº“**: Element UI
- **æ„å»ºå·¥å…·**: Webpack
- **çŠ¶æ€ç®¡ç†**: Vuex
- **è·¯ç”±**: Vue Router

### åˆ¤é¢˜ç³»ç»Ÿ
- **æ²™ç®±**: è‡ªç ”å®‰å…¨æ²™ç®±
- **è¯­è¨€æ”¯æŒ**: å¤šè¯­è¨€ç¼–è¯‘æ‰§è¡Œç¯å¢ƒ
- **èµ„æºé™åˆ¶**: å†…å­˜ã€æ—¶é—´ã€è¾“å‡ºé™åˆ¶

## é¡¹ç›®ç»“æ„

```
MetaSpeekOJ/
â”œâ”€â”€ OnlineJudge/                 # åç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ account/                 # ç”¨æˆ·è´¦æˆ·æ¨¡å—
â”‚   â”œâ”€â”€ announcement/            # å…¬å‘Šæ¨¡å—
â”‚   â”œâ”€â”€ choice_question/         # é€‰æ‹©é¢˜æ¨¡å— (æ–°å¢)
â”‚   â”œâ”€â”€ conf/                    # ç³»ç»Ÿé…ç½®
â”‚   â”œâ”€â”€ contest/                 # æ¯”èµ›æ¨¡å—
â”‚   â”œâ”€â”€ judge/                   # åˆ¤é¢˜æ¨¡å—
â”‚   â”œâ”€â”€ problem/                 # é¢˜ç›®æ¨¡å—
â”‚   â”œâ”€â”€ submission/              # æäº¤æ¨¡å—
â”‚   â”œâ”€â”€ utils/                   # å·¥å…·æ¨¡å—
â”‚   â””â”€â”€ manage.py               # Django ç®¡ç†è„šæœ¬
â”œâ”€â”€ OnlineJudgeFE/              # å‰ç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ components/         # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ store/              # Vuex çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ package.json
â””â”€â”€ deploy/                     # éƒ¨ç½²é…ç½®
```

## æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ
- ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æƒé™ç®¡ç†
- ç”¨æˆ·èµ„æ–™ç®¡ç†ã€å¤´åƒä¸Šä¼ 
- ç®¡ç†å‘˜åå°ç®¡ç†

### 2. é¢˜ç›®ç®¡ç†ç³»ç»Ÿ
- é¢˜ç›®åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤
- é¢˜ç›®åˆ†ç±»ã€æ ‡ç­¾ç®¡ç†
- æµ‹è¯•æ•°æ®ç®¡ç†
- é¢˜ç›®å¯¼å…¥å¯¼å‡º

### 3. é€‰æ‹©é¢˜æ¨¡å— (V1.0 æ–°å¢)
- **å‰ç«¯ç®¡ç†ç•Œé¢**: ç°ä»£åŒ–çš„é€‰æ‹©é¢˜åˆ›å»ºå’Œç®¡ç†ç•Œé¢
- **åç«¯APIç³»ç»Ÿ**: RESTful API æ”¯æŒ CRUD æ“ä½œ
- **æ•°æ®æ¨¡å‹**: å®Œæ•´çš„é€‰æ‹©é¢˜æ•°æ®ç»“æ„
- **éš¾åº¦åˆ†çº§**: æ”¯æŒç®€å•ã€ä¸­ç­‰ã€å›°éš¾ä¸‰ä¸ªéš¾åº¦ç­‰çº§
- **é€‰é¡¹ç®¡ç†**: æ”¯æŒå¤šé€‰é¡¹é…ç½®å’Œæ­£ç¡®ç­”æ¡ˆè®¾ç½®

### 4. åˆ¤é¢˜ç³»ç»Ÿ
- å¤šè¯­è¨€ç¼–è¯‘æ‰§è¡Œ
- å®‰å…¨æ²™ç®±ç¯å¢ƒ
- å®æ—¶åˆ¤é¢˜çŠ¶æ€
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯

### 5. æ¯”èµ›ç³»ç»Ÿ
- æ¯”èµ›åˆ›å»ºå’Œç®¡ç†
- å®æ—¶æ’è¡Œæ¦œ
- æ¯”èµ›ç»Ÿè®¡åˆ†æ

## å¼€å‘ç¯å¢ƒæ­å»º

### ç¯å¢ƒè¦æ±‚
- Python 3.8+
- Node.js 14+
- PostgreSQL 12+ / MySQL 8.0+
- Redis 6.0+

### åç«¯ç¯å¢ƒæ­å»º

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/sharelgx/MetaSpeekOJ.git
cd MetaSpeekOJ/OnlineJudge

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ– venv\Scripts\activate  # Windows

# å®‰è£…ä¾èµ–
pip install -r deploy/requirements.txt

# æ•°æ®åº“è¿ç§»
python manage.py migrate

# åˆ›å»ºè¶…çº§ç”¨æˆ·
python manage.py createsuperuser

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python manage.py runserver 0.0.0.0:8000
```

### å‰ç«¯ç¯å¢ƒæ­å»º

```bash
cd OnlineJudgeFE

# å®‰è£…ä¾èµ–
npm install
# æˆ–ä½¿ç”¨ yarn
yarn install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
TARGET=http://localhost:8000 NODE_OPTIONS="--openssl-legacy-provider" PORT=8080 npm run dev
```

### ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://user:password@localhost:5432/onlinejudge

# Redisé…ç½®
REDIS_URL=redis://localhost:6379/0

# é‚®ä»¶é…ç½®
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-password

# å®‰å…¨é…ç½®
SECRET_KEY=your-secret-key
DEBUG=True
```

## API æ–‡æ¡£

### é€‰æ‹©é¢˜ API

#### åˆ›å»ºé€‰æ‹©é¢˜
```http
POST /api/admin/choice_question/
Content-Type: application/json

{
  "title": "é¢˜ç›®æ ‡é¢˜",
  "description": "é¢˜ç›®æè¿°",
  "difficulty": "easy",
  "options": [
    {"key": "A", "value": "é€‰é¡¹A"},
    {"key": "B", "value": "é€‰é¡¹B"},
    {"key": "C", "value": "é€‰é¡¹C"},
    {"key": "D", "value": "é€‰é¡¹D"}
  ],
  "correct_answer": "A"
}
```

#### è·å–é€‰æ‹©é¢˜åˆ—è¡¨
```http
GET /api/admin/choice_question/?page=1&limit=10&difficulty=easy
```

#### æ›´æ–°é€‰æ‹©é¢˜
```http
PUT /api/admin/choice_question/{id}/
Content-Type: application/json

{
  "title": "æ›´æ–°åçš„æ ‡é¢˜",
  "difficulty": "medium"
}
```

#### åˆ é™¤é€‰æ‹©é¢˜
```http
DELETE /api/admin/choice_question/{id}/
```

## éƒ¨ç½²æŒ‡å—

### Docker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker-compose build

# å¯åŠ¨æœåŠ¡
docker-compose up -d

# æ•°æ®åº“è¿ç§»
docker-compose exec backend python manage.py migrate

# åˆ›å»ºè¶…çº§ç”¨æˆ·
docker-compose exec backend python manage.py createsuperuser
```

### ç”Ÿäº§ç¯å¢ƒé…ç½®

1. **Nginx é…ç½®**
```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location /api/ {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
    
    location / {
        root /path/to/frontend/dist;
        try_files $uri $uri/ /index.html;
    }
}
```

2. **Supervisor é…ç½®**
```ini
[program:onlinejudge]
command=/path/to/venv/bin/gunicorn oj.wsgi:application
directory=/path/to/OnlineJudge
user=www-data
autostart=true
autorestart=true
```

## æµ‹è¯•

### åç«¯æµ‹è¯•
```bash
cd OnlineJudge
python manage.py test

# è¦†ç›–ç‡æµ‹è¯•
coverage run --source='.' manage.py test
coverage report
```

### å‰ç«¯æµ‹è¯•
```bash
cd OnlineJudgeFE
npm run test
```

## ç‰ˆæœ¬å†å²

### V1.0 (2025-01-29)
- âœ… å®Œæ•´çš„é€‰æ‹©é¢˜æ¨¡å—å®ç°
- âœ… ç°ä»£åŒ–ç®¡ç†ç•Œé¢
- âœ… RESTful API ç³»ç»Ÿ
- âœ… æ•°æ®éªŒè¯å’Œé”™è¯¯å¤„ç†
- âœ… å“åº”å¼è®¾è®¡æ”¯æŒ
- âœ… ç”Ÿäº§ç¯å¢ƒå°±ç»ª

### ä¸»è¦ä¿®å¤
- ğŸ› ä¿®å¤é€‰æ‹©é¢˜éš¾åº¦å­—æ®µéªŒè¯é”™è¯¯
- ğŸ› ä¿®å¤å­—ä½“å›¾æ ‡åŠ è½½é—®é¢˜
- ğŸ› ä¼˜åŒ–æœåŠ¡ç«¯å£é…ç½®

## é€‰æ‹©é¢˜æ¨¡å—æ¶æ„è°ƒç ”æŠ¥å‘Š

### æ¨¡å—é›†æˆæ·±åº¦åˆ†æ

#### 1. å½“å‰æ¶æ„çŠ¶æ€
é€‰æ‹©é¢˜æ¨¡å—ç›®å‰é‡‡ç”¨**æ·±åº¦é›†æˆ**æ¶æ„ï¼Œä½œä¸º Django åº”ç”¨å®Œå…¨é›†æˆåœ¨ä¸»é¡¹ç›®ä¸­ï¼š

- **åç«¯é›†æˆ**ï¼šæ³¨å†Œåœ¨ `oj/settings.py` çš„ `LOCAL_APPS` ä¸­
- **URLè·¯ç”±**ï¼šé€šè¿‡ `oj/urls.py` é›†æˆ API è·¯ç”±ï¼ˆ`api/plugin/choice/` å’Œ `api/admin/`ï¼‰
- **æ•°æ®åº“**ï¼šä¸ä¸»é¡¹ç›®å…±äº«æ•°æ®åº“ï¼Œå·²å®Œæˆè¿ç§»é›†æˆ
- **å‰ç«¯é›†æˆ**ï¼šè·¯ç”±å’Œç»„ä»¶ç›´æ¥é›†æˆåœ¨ä¸»å‰ç«¯é¡¹ç›®ä¸­

#### 2. é¡¹ç›®ç»“æ„å¯¹æ¯”

**å½“å‰é›†æˆç»“æ„**ï¼š
```
OnlineJudge/choice_question/     # é›†æˆç‰ˆæœ¬ï¼ˆå½“å‰è¿è¡Œï¼‰
â”œâ”€â”€ models/                      # æ•°æ®æ¨¡å‹
â”œâ”€â”€ views.py                     # APIè§†å›¾
â”œâ”€â”€ urls.py                      # URLé…ç½®
â””â”€â”€ admin_urls.py               # ç®¡ç†ç«¯URL

qduoj-choice-question-plugin/    # ç‹¬ç«‹æ’ä»¶ç‰ˆæœ¬ï¼ˆå¤‡ä»½/å‚è€ƒï¼‰
â”œâ”€â”€ backend/                     # ç‹¬ç«‹åç«¯
â”œâ”€â”€ frontend/                    # ç‹¬ç«‹å‰ç«¯
â””â”€â”€ install.sh                  # å®‰è£…è„šæœ¬
```

#### 3. ç‹¬ç«‹åŒ–å¤æ‚åº¦è¯„ä¼°

**å¦‚æœå°†é€‰æ‹©é¢˜æ¨¡å—ç‹¬ç«‹åŒ–ï¼Œéœ€è¦è¿›è¡Œä»¥ä¸‹ä¿®æ”¹**ï¼š

##### åç«¯ä¿®æ”¹ï¼ˆé«˜å¤æ‚åº¦ï¼‰
- ä» `settings.py` ç§»é™¤ `choice_question` åº”ç”¨æ³¨å†Œ
- ä¿®æ”¹ `urls.py` ç§»é™¤ç›¸å…³è·¯ç”±é…ç½®
- é‡æ„ä¸ºç‹¬ç«‹ Django é¡¹ç›®ï¼Œé…ç½®ç‹¬ç«‹çš„è®¾ç½®æ–‡ä»¶
- å¤„ç†æ•°æ®åº“è¿ç§»å’Œæ•°æ®åˆ†ç¦»
- å®ç°æœåŠ¡é—´é€šä¿¡æœºåˆ¶ï¼ˆAPIè°ƒç”¨æˆ–æ¶ˆæ¯é˜Ÿåˆ—ï¼‰
- å¤„ç†ç”¨æˆ·è®¤è¯å’Œæƒé™åŒæ­¥é—®é¢˜

##### å‰ç«¯ä¿®æ”¹ï¼ˆä¸­ç­‰å¤æ‚åº¦ï¼‰
- ä¿®æ”¹ API baseURL é…ç½®ï¼ˆå½“å‰ç¡¬ç¼–ç ä¸º `/api`ï¼‰
- é‡æ–°é…ç½®è·¯ç”±ç³»ç»Ÿï¼Œå¤„ç†è·¨åŸŸé—®é¢˜
- ä¿®æ”¹ç»„ä»¶å¯¼å…¥è·¯å¾„å’Œä¾èµ–å…³ç³»
- å¯èƒ½éœ€è¦ç‹¬ç«‹çš„å‰ç«¯æ„å»ºå’Œéƒ¨ç½²æµç¨‹
- å¤„ç†ç”¨æˆ·ä¼šè¯å’Œè®¤è¯çŠ¶æ€åŒæ­¥

##### è¿ç»´å¤æ‚åº¦ï¼ˆé«˜å¤æ‚åº¦ï¼‰
- éœ€è¦ç‹¬ç«‹çš„æœåŠ¡éƒ¨ç½²å’Œç›‘æ§
- æ•°æ®åº“è¿æ¥å’Œå¤‡ä»½ç­–ç•¥è°ƒæ•´
- è´Ÿè½½å‡è¡¡å’ŒæœåŠ¡å‘ç°é…ç½®
- æ—¥å¿—èšåˆå’Œé”™è¯¯è¿½è¸ª

#### 4. æ¶æ„å»ºè®®

**æ¨èä¿æŒå½“å‰é›†æˆæ¶æ„**ï¼ŒåŸå› å¦‚ä¸‹ï¼š

1. **å¼€å‘æ•ˆç‡**ï¼šé›†æˆæ¶æ„ä¾¿äºå¼€å‘ã€è°ƒè¯•å’Œç»´æŠ¤
2. **éƒ¨ç½²ç®€å•**ï¼šå•ä¸€åº”ç”¨éƒ¨ç½²ï¼Œå‡å°‘è¿ç»´å¤æ‚åº¦
3. **æ€§èƒ½ä¼˜åŠ¿**ï¼šé¿å…æœåŠ¡é—´é€šä¿¡å¼€é”€
4. **æ•°æ®ä¸€è‡´æ€§**ï¼šå…±äº«æ•°æ®åº“ï¼Œäº‹åŠ¡å¤„ç†æ›´ç®€å•
5. **ç”¨æˆ·ä½“éªŒ**ï¼šç»Ÿä¸€çš„å‰ç«¯ç•Œé¢å’Œç”¨æˆ·ä¼šè¯

**é€‚åˆç‹¬ç«‹åŒ–çš„åœºæ™¯**ï¼š
- éœ€è¦ç‹¬ç«‹æ‰©å±•é€‰æ‹©é¢˜æœåŠ¡
- å¤šä¸ª OJ ç³»ç»Ÿå…±äº«é€‰æ‹©é¢˜æ¨¡å—
- å›¢é˜Ÿåˆ†å·¥éœ€è¦ç‹¬ç«‹å¼€å‘å’Œéƒ¨ç½²

### æŠ€æœ¯å€ºåŠ¡åˆ†æ

#### å½“å‰æŠ€æœ¯å€ºåŠ¡
- å‰ç«¯ API é…ç½®ç¡¬ç¼–ç ï¼ˆ`baseURL = '/api'`ï¼‰
- è·¯ç”±é…ç½®è€¦åˆåº¦è¾ƒé«˜
- ç¼ºå°‘æœåŠ¡è¾¹ç•ŒæŠ½è±¡

#### æ”¹è¿›å»ºè®®
- å¼•å…¥é…ç½®ç®¡ç†ï¼Œæ”¯æŒç¯å¢ƒå˜é‡é…ç½® API åœ°å€
- æŠ½è±¡æœåŠ¡æ¥å£ï¼Œä¸ºæœªæ¥å¯èƒ½çš„ç‹¬ç«‹åŒ–åšå‡†å¤‡
- å®Œå–„æ¨¡å—é—´çš„ä¾èµ–ç®¡ç†

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

### ä»£ç è§„èŒƒ
- åç«¯éµå¾ª PEP 8 è§„èŒƒ
- å‰ç«¯éµå¾ª ESLint é…ç½®
- æäº¤ä¿¡æ¯éµå¾ª Conventional Commits

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## è”ç³»æ–¹å¼

- é¡¹ç›®åœ°å€: https://github.com/sharelgx/MetaSpeekOJ
- é—®é¢˜åé¦ˆ: https://github.com/sharelgx/MetaSpeekOJ/issues

## è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ä»¬ï¼

---

**MetaSpeekOJ** - è®©ç¼–ç¨‹å­¦ä¹ æ›´ç®€å•ï¼Œè®©ç«èµ›æ›´ç²¾å½©ï¼