"use strict";(this.webpackChunkChoiceQuestionPlugin=this.webpackChunkChoiceQuestionPlugin||[]).push([[674],{674:function(t,e,i){i.r(e);var n=i(683);const a={SET_QUESTIONS(t,{data:e,total:i}){t.questions=e,t.pagination.total=i},SET_CURRENT_QUESTION(t,e){t.currentQuestion=e},SET_CATEGORIES(t,e){t.categories=e},SET_TAGS(t,e){t.tags=e},SET_SUBMISSIONS(t,{data:e,total:i}){t.submissions=e,t.pagination.total=i},SET_WRONG_QUESTIONS(t,{data:e,total:i}){t.wrongQuestions=e,t.pagination.total=i},SET_STATS(t,e){t.stats=e},UPDATE_PAGINATION(t,e){t.pagination={...t.pagination,...e}},UPDATE_FILTERS(t,e){t.filters={...t.filters,...e}},SET_LOADING(t,{type:e,loading:i}){t.loading[e]=i}},s={async getQuestions({commit:t,state:e}){t("SET_LOADING",{type:"questions",loading:!0});try{const i={page:e.pagination.page,limit:e.pagination.limit,...e.filters},a=await n.A.getQuestions(i);return t("SET_QUESTIONS",a.data),a}finally{t("SET_LOADING",{type:"questions",loading:!1})}},async getQuestionDetail({commit:t},e){const i=await n.A.getQuestionDetail(e);return t("SET_CURRENT_QUESTION",i.data),i},async getCategories({commit:t}){t("SET_LOADING",{type:"categories",loading:!0});try{const e=await n.A.getCategories();return t("SET_CATEGORIES",e.data.results||e.data),e}finally{t("SET_LOADING",{type:"categories",loading:!1})}},async getTags({commit:t}){t("SET_LOADING",{type:"tags",loading:!0});try{const e=await n.A.getTags();return t("SET_TAGS",e.data.results||e.data),e}finally{t("SET_LOADING",{type:"tags",loading:!1})}},async submitAnswer({dispatch:t},{questionId:e,selectedAnswer:i}){const a=await n.A.submitAnswer({questionId:e,selectedAnswer:i});return await t("getQuestionDetail",e),a},async getSubmissions({commit:t,state:e}){t("SET_LOADING",{type:"submissions",loading:!0});try{const i={page:e.pagination.page,limit:e.pagination.limit},a=await n.A.getSubmissions(i);return t("SET_SUBMISSIONS",a.data),a}finally{t("SET_LOADING",{type:"submissions",loading:!1})}},async getWrongQuestions({commit:t,state:e}){t("SET_LOADING",{type:"wrongQuestions",loading:!0});try{const i={page:e.pagination.page,limit:e.pagination.limit,...e.filters},a=await n.A.getWrongQuestions(i);return t("SET_WRONG_QUESTIONS",a.data),a}finally{t("SET_LOADING",{type:"wrongQuestions",loading:!1})}},async addWrongQuestion({dispatch:t},e){const i=await n.A.addWrongQuestion({questionId:e});return await t("getWrongQuestions"),i},async removeWrongQuestion({dispatch:t},e){const i=await n.A.removeWrongQuestion(e);return await t("getWrongQuestions"),i},async getStats({commit:t}){t("SET_LOADING",{type:"stats",loading:!0});try{const e=await n.A.getStats();return t("SET_STATS",e.data),e}finally{t("SET_LOADING",{type:"stats",loading:!1})}},updatePagination({commit:t},e){t("UPDATE_PAGINATION",e)},updateFilters({commit:t},e){t("UPDATE_FILTERS",e)},resetFilters({commit:t}){t("UPDATE_FILTERS",{keyword:"",category:null,tags:[],difficulty:null,questionType:null})}};e.default={namespaced:!0,state:{questions:[],currentQuestion:null,categories:[],tags:[],submissions:[],wrongQuestions:[],stats:null,pagination:{page:1,limit:20,total:0},filters:{keyword:"",category:null,tags:[],difficulty:null,questionType:null},loading:{questions:!1,categories:!1,tags:!1,submissions:!1,wrongQuestions:!1,stats:!1}},mutations:a,actions:s,getters:{currentQuestions:t=>t.questions,currentQuestion:t=>t.currentQuestion,categoryOptions:t=>t.categories.map(t=>({label:t.name,value:t.id})),tagOptions:t=>t.tags.map(t=>({label:t.name,value:t.id,color:t.color})),isLoading:t=>e=>t.loading[e]||!1,pagination:t=>t.pagination,filters:t=>t.filters}}},683:function(t,e){const i=(t,e="get",i={})=>{const n="/api/"+t,a={method:e.toUpperCase(),headers:{"Content-Type":"application/json","X-CSRFToken":document.querySelector("[name=csrfmiddlewaretoken]")?.value||""}};if(i.params){const t=new URLSearchParams(i.params),e=n.includes("?")?"&":"?";a.url=n+e+t.toString()}else a.url=n;return i.data&&["POST","PUT","PATCH"].includes(a.method)&&(a.body=JSON.stringify(i.data)),fetch(a.url,a).then(t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json().then(t=>({data:t}))})};e.A={getCategoryList(){return i("plugin/choice/categories/","get")},createCategory(t){return i("plugin/choice/categories/","post",{data:t})},updateCategory(t,e){return i(`plugin/choice/categories/${t}/`,"put",{data:e})},deleteCategory(t){return i(`plugin/choice/categories/${t}/`,"delete")},getTagList(){return i("plugin/choice/tags/","get")},createTag(t){return i("plugin/choice/tags/","post",{data:t})},updateTag(t,e){return i(`plugin/choice/tags/${t}/`,"put",{data:e})},deleteTag(t){return i(`plugin/choice/tags/${t}/`,"delete")},getQuestionList(t){return i("plugin/choice/questions/","get",{params:t})},getQuestionDetail(t){return i(`plugin/choice/questions/${t}/`,"get")},createQuestion(t){return i("plugin/choice/questions/","post",{data:t})},updateQuestion(t,e){return i(`plugin/choice/questions/${t}/`,"put",{data:e})},deleteQuestion(t){return i(`plugin/choice/questions/${t}/`,"delete")},submitAnswer(t){return i("plugin/choice/submissions/","post",{data:t})},getSubmissionList(t){return i("plugin/choice/submissions/","get",{params:t})},getWrongQuestionList(t){return i("plugin/choice/wrong-questions/","get",{params:t})},addToWrongQuestions(t){return i("plugin/choice/wrong-questions/","post",{data:t})},removeFromWrongQuestions(t){return i(`plugin/choice/wrong-questions/${t}/`,"delete")},updateWrongQuestionNote(t,e){return i(`plugin/choice/wrong-questions/${t}/`,"put",{data:e})},getQuestionStats(){return i("plugin/choice/statistics/","get")},importQuestions(t){return i("plugin/choice/import/","post",{data:t,headers:{"Content-Type":"multipart/form-data"}})},exportQuestions(t){return i("plugin/choice/export/","get",{params:t,responseType:"blob"})},downloadTemplate(t){return i("plugin/choice/template/","get",{params:{format:t},responseType:"blob"})},batchOperation(t){return i("plugin/choice/batch/","post",{data:t})},getImportHistory(t){return i("plugin/choice/import-history/","get",{params:t})}}}}]);
//# sourceMappingURL=674.f7f1d6079c96f3462c67.chunk.js.map