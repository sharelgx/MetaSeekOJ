<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é»‘ç™½å›¾æ¡ˆè®­ç»ƒè¥ - è¾¹ç©è¾¹å­¦ç¼–ç¨‹é¢˜è§£é¢˜æ€è·¯</title>
    <style>
        :root {
            --primary: #4A90E2;
            --secondary: #FF6B8B;
            --success: #5CB85C;
            --warning: #F0AD4E;
            --light-bg: #F8F9FA;
            --dark-text: #333333;
            --light-text: #666666;
            --cell-size: 40px;
            --grid-gap: 2px;
            --shadow: 0 4px 8px rgba(0,0,0,0.1);
            --border-radius: 12px;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Comic Sans MS", "å¹¼åœ†", "ZCOOL KuaiLe", cursive;
        }
        body {
            background-color: var(--light-bg);
            color: var(--dark-text);
            text-align: center;
            padding: 20px;
            overflow-x: hidden;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        header {
            margin-bottom: 30px;
        }
        h1 {
            color: var(--primary);
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        h2 {
            color: var(--secondary);
            margin: 20px 0;
        }
        h3 {
            color: var(--primary);
            margin: 15px 0;
        }
        .intro {
            background-color: white;
            padding: 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            line-height: 1.6;
        }
        .level-selector {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
        }
        .level-card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            width: 150px;
            padding: 20px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
        }
        .level-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        .level-card.locked::after {
            content: 'ğŸ”’';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3rem;
            background-color: rgba(255,255,255,0.8);
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--border-radius);
        }
        .level-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 10px;
        }
        .game-screen {
            display: none;
        }
        .level-screen {
            display: none;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 25px;
            margin-bottom: 30px;
        }
        .level-screen.active {
            display: block;
        }
        .grid-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(10, var(--cell-size));
            grid-gap: var(--grid-gap);
            background-color: #999;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .small-grid {
            display: grid;
            grid-template-columns: repeat(4, 30px);
            grid-gap: 2px;
            margin: 10px auto;
        }
        .cell {
            width: var(--cell-size);
            height: var(--cell-size);
            background-color: white;
            border: 1px solid #ddd;
            cursor: pointer;
            transition: all 0.2s ease;
            border-radius: 4px;
        }
        .small-cell {
            width: 30px;
            height: 30px;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 3px;
        }
        .cell.black, .small-cell.black {
            background-color: #333;
        }
        .cell.highlighted {
            box-shadow: 0 0 0 2px #4CAF50, inset 0 0 0 2px #4CAF50;
        }
        .cell.selected {
            box-shadow: 0 0 0 2px #2196F3, inset 0 0 0 2px #2196F3;
        }
        .controls {
            margin: 20px 0;
        }
        .btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 24px;
            margin: 0 10px 15px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-family: inherit;
            transition: transform 0.2s, background-color 0.2s;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        }
        .btn:hover {
            transform: scale(1.05);
            background-color: #3A80D2;
        }
        .btn-secondary {
            background-color: var(--secondary);
        }
        .btn-secondary:hover {
            background-color: #EE5B7B;
        }
        .btn-success {
            background-color: var(--success);
        }
        .btn-success:hover {
            background-color: #4CAF4C;
        }
        .feedback {
            height: 60px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
        }
        .correct {
            color: var(--success);
            animation: pulse 1s;
        }
        .incorrect {
            color: #d32f2f;
        }
        .instruction {
            background-color: #e8f5e9;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid var(--success);
        }
        .hint-box {
            background-color: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid var(--warning);
            display: flex;
            align-items: center;
        }
        .hint-box:before {
            content: 'ğŸ’¡';
            margin-right: 10px;
            font-size: 1.5rem;
        }
        .pattern-example {
            background-color: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .progress-container {
            margin: 20px 0;
        }
        .progress-bar {
            height: 15px;
            background-color: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background-color: var(--primary);
            width: 0%;
            transition: width 0.5s;
        }
        .achievements {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }
        .achievement {
            background-color: white;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: var(--shadow);
        }
        .achievement.locked {
            background-color: #e0e0e0;
            color: #999;
        }
        .congrats-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background-color: white;
            padding: 40px;
            border-radius: var(--border-radius);
            text-align: center;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        .modal-content h2 {
            color: var(--primary);
            margin-bottom: 20px;
        }
        .level-objective {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .code-example {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            text-align: left;
            overflow-x: auto;
            margin: 20px 0;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        .pattern-choices {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin: 25px 0;
        }
        .pattern-choice {
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #ddd;
            cursor: pointer;
            transition: all 0.3s;
        }
        .pattern-choice:hover {
            border-color: var(--primary);
            background-color: #f5f9ff;
        }
        .pattern-choice.selected {
            border-color: var(--success);
            background-color: #f0f9f0;
        }
        .drag-box {
            border: 2px dashed #ccc;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            border-radius: 8px;
            transition: all 0.3s;
        }
        .drag-box.active {
            border-color: var(--primary);
            background-color: #f5f9ff;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        @media (max-width: 768px) {
            :root {
                --cell-size: 30px;
            }
            .level-card {
                width: 120px;
            }
            h1 {
                font-size: 2rem;
            }
            .btn {
                padding: 10px 20px;
                font-size: 14px;
            }
        }
        @media (max-width: 480px) {
            :root {
                --cell-size: 25px;
            }
            .level-selector {
                gap: 10px;
            }
            .level-card {
                width: 100px;
                padding: 15px;
            }
            .controls {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
            }
            .btn {
                margin: 5px;
                width: calc(50% - 10px);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ‰ é»‘ç™½å›¾æ¡ˆè®­ç»ƒè¥ ğŸ‰</h1>
            <p>è¾¹ç©è¾¹å­¦ã€ç†è§£é»‘ç™½å›¾æ¡ˆé¢˜çš„äº’åŠ¨è§£é¢˜å°æ¸¸æˆ</p>
        </header>

        <!-- æ¬¢è¿ç•Œé¢ -->
        <div class="intro" id="welcome-screen">
            <h2>æ¬¢è¿æ¥åˆ°é»‘ç™½å›¾æ¡ˆè®­ç»ƒè¥ï¼</h2>
            <p>è¿™ä¸æ˜¯æ™®é€šçš„æ¸¸æˆï¼Œè€Œæ˜¯ä¸€ä¸ªå¸¦æœ‰<strong>ç¼–ç¨‹é¢˜è§£é¢˜è¿‡ç¨‹å¼•å¯¼</strong>çš„<strong>â€œè®­ç»ƒè¥â€å‹å°æ¸¸æˆ</strong>ã€‚</p>
            <p>æˆ‘ä»¬å°†é€šè¿‡äº¤äº’å¼ä»»åŠ¡å’Œæç¤ºï¼Œå¸®åŠ©ä½ æŒæ¡GESP2409é»‘ç™½æ–¹å—é¢˜çš„è§£é¢˜æ€è·¯ã€‚</p>
            <div class="level-objective">
                <h3>ğŸ“š å­¦ä¹ ç›®æ ‡</h3>
                <p>ç»™ä½ ä¸€ä¸ªNÃ—Nçš„ç”±0å’Œ1ç»„æˆçš„æ–¹é˜µï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸€ä¸ª4Ã—4çš„å­çŸ©å½¢ï¼Œç¬¦åˆç‰¹å®šçš„é»‘ç™½å›¾æ¡ˆç»“æ„ã€‚</p>
            </div>
            <p>å®Œæˆ5ä¸ªå…³å¡ï¼Œæˆä¸ºé»‘ç™½å›¾æ¡ˆè§£é¢˜å¤§å¸ˆï¼</p>
            <button class="btn btn-success" onclick="startGame()">å¼€å§‹è®­ç»ƒä¹‹æ—… â†’</button>
        </div>

        <!-- å…³å¡é€‰æ‹©ç•Œé¢ -->
        <div class="game-screen" id="level-select-screen">
            <h2>é€‰æ‹©å…³å¡</h2>
            <p>å®Œæˆå‰é¢çš„å…³å¡æ¥è§£é”æ–°çš„æŒ‘æˆ˜ï¼</p>
            <div class="level-selector">
                <div class="level-card" onclick="selectLevel(1)">
                    <div class="level-number">1</div>
                    <div class="level-name">å›¾æ¡ˆç†è§£</div>
                    <div class="level-icon">ğŸ§©</div>
                </div>
                <div class="level-card locked" onclick="showLockedMessage()">
                    <div class="level-number">2</div>
                    <div class="level-name">éå†æŒ‘æˆ˜</div>
                    <div class="level-icon">ğŸ”</div>
                </div>
                <div class="level-card locked" onclick="showLockedMessage()">
                    <div class="level-number">3</div>
                    <div class="level-name">ç‚¹å‡»åˆ¤æ–­</div>
                    <div class="level-icon">ğŸ‘†</div>
                </div>
                <div class="level-card locked" onclick="showLockedMessage()">
                    <div class="level-number">4</div>
                    <div class="level-name">è‡ªåŠ¨æŸ¥æ‰¾</div>
                    <div class="level-icon">ğŸ¤–</div>
                </div>
                <div class="level-card locked" onclick="showLockedMessage()">
                    <div class="level-number">5</div>
                    <div class="level-name">åå‘æŒ‘æˆ˜</div>
                    <div class="level-icon">ğŸ¨</div>
                </div>
            </div>
            <div class="progress-container">
                <p>æ€»ä½“è¿›åº¦: <span id="progress-text">0%</span></p>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-bar" style="width: 0%"></div>
                </div>
            </div>
            <div class="achievements">
                <div class="achievement locked">ğŸ†</div>
                <div class="achievement locked">ğŸ†</div>
                <div class="achievement locked">ğŸ†</div>
                <div class="achievement locked">ğŸ†</div>
                <div class="achievement locked">ğŸ†</div>
            </div>
        </div>

        <!-- ç¬¬1å…³ï¼šå›¾æ¡ˆç†è§£å…³å¡ -->
        <div class="level-screen" id="level-1">
            <div class="navigation">
                <button class="btn" onclick="goToLevelSelect()">â† è¿”å›å…³å¡é€‰æ‹©</button>
                <button class="btn btn-secondary" onclick="showHint(1)">æç¤º ğŸ’¡</button>
            </div>
            <h2>ç¬¬1å…³ï¼šå›¾æ¡ˆç†è§£å…³å¡ ğŸ§©</h2>
            <div class="level-objective">
                <h3>å­¦ä¹ ç›®æ ‡</h3>
                <p>ç†è§£é¢˜ç›®å›¾æ¡ˆå«ä¹‰ä¸è§„åˆ™ç»“æ„</p>
            </div>
            <div class="instruction">
                <p>åœ¨è¿™ä¸ªå…³å¡ä¸­ï¼Œä½ éœ€è¦å­¦ä¹ è¯†åˆ«ç›®æ ‡å›¾æ¡ˆçš„ç‰¹å¾ã€‚</p>
                <p>ä»”ç»†è§‚å¯Ÿä¸‹é¢çš„æ ‡å‡†å›¾æ¡ˆï¼Œç„¶ååˆ¤æ–­å“ªäº›é€‰é¡¹ç¬¦åˆè¿™ä¸ªå›¾æ¡ˆè§„åˆ™ã€‚</p>
            </div>

            <div class="pattern-example">
                <h3>ç›®æ ‡å›¾æ¡ˆï¼š</h3>
                <p>ç¬¬1è¡Œå’Œç¬¬4è¡Œå…¨ç™½ï¼Œä¸­é—´ä¸¤è¡Œä¸­é—´ä¸¤æ ¼ä¸ºé»‘</p>
                <div class="small-grid" id="target-pattern">
                    <!-- ç¬¬1è¡Œï¼š0000 -->
                    <div class="small-cell"></div>
                    <div class="small-cell"></div>
                    <div class="small-cell"></div>
                    <div class="small-cell"></div>
                    <!-- ç¬¬2è¡Œï¼š0110 -->
                    <div class="small-cell"></div>
                    <div class="small-cell black"></div>
                    <div class="small-cell black"></div>
                    <div class="small-cell"></div>
                    <!-- ç¬¬3è¡Œï¼š0110 -->
                    <div class="small-cell"></div>
                    <div class="small-cell black"></div>
                    <div class="small-cell black"></div>
                    <div class="small-cell"></div>
                    <!-- ç¬¬4è¡Œï¼š0000 -->
                    <div class="small-cell"></div>
                    <div class="small-cell"></div>
                    <div class="small-cell"></div>
                    <div class="small-cell"></div>
                </div>
            </div>

            <h3>è¯·é€‰æ‹©ç¬¦åˆç›®æ ‡å›¾æ¡ˆè§„åˆ™çš„é€‰é¡¹ï¼š</h3>
            <div class="pattern-choices">
                <div class="pattern-choice" onclick="selectPattern(1, this)">
                    <div class="small-grid">
                        <div class="small-cell"></div><div class="small-cell"></div><div class="small-cell"></div><div class="small-cell"></div>
                        <div class="small-cell"></div><div class="small-cell black"></div><div class="small-cell black"></div><div class="small-cell"></div>
                        <div class="small-cell"></div><div class="small-cell black"></div><div class="small-cell black"></div><div class="small-cell"></div>
                        <div class="small-cell"></div><div class="small-cell"></div><div class="small-cell"></div><div class="small-cell"></div>
                    </div>
                    <p>é€‰é¡¹ A</p>
                </div>
                <div class="pattern-choice" onclick="selectPattern(2, this)">
                    <div class="small-grid">
                        <div class="small-cell black"></div><div class="small-cell black"></div><div class="small-cell black"></div><div class="small-cell black"></div>
                        <div class="small-cell"></div><div class="small-cell"></div><div class="small-cell"></div><div class="small-cell"></div>
                        <div class="small-cell"></div><div class="small-cell"></div><div class="small-cell"></div><div class="small-cell"></div>
                        <div class="small-cell black"></div><div class="small-cell black"></div><div class="small-cell black"></div><div class="small-cell black"></div>
                    </div>
                    <p>é€‰é¡¹ B</p>
                </div>
                <div class="pattern-choice" onclick="selectPattern(3, this)">
                    <div class="small-grid">
                        <div class="small-cell"></div><div class="small-cell"></div><div class="small-cell"></div><div class="small-cell"></div>
                        <div class="small-cell black"></div><div class="small-cell"></div><div class="small-cell"></div><div class="small-cell black"></div>
                        <div class="small-cell black"></div><div class="small-cell"></div><div class="small-cell"></div><div class="small-cell black"></div>
                        <div class="small-cell"></div><div class="small-cell"></div><div class="small-cell"></div><div class="small-cell"></div>
                    </div>
                    <p>é€‰é¡¹ C</p>
                </div>
                <div class="pattern-choice" onclick="selectPattern(4, this)">
                    <div class="small-grid">
                        <div class="small-cell"></div><div class="small-cell"></div><div class="small-cell"></div><div class="small-cell"></div>
                        <div class="small-cell"></div><div class="small-cell black"></div><div class="small-cell black"></div><div class="small-cell"></div>
                        <div class="small-cell black"></div><div class="small-cell black"></div><div class="small-cell black"></div><div class="small-cell black"></div>
                        <div class="small-cell"></div><div class="small-cell"></div><div class="small-cell"></div><div class="small-cell"></div>
                    </div>
                    <p>é€‰é¡¹ D</p>
                </div>
            </div>

            <div class="feedback" id="level1-feedback"></div>
            <div class="controls">
                <button class="btn" onclick="checkAnswer()">æäº¤ç­”æ¡ˆ</button>
                <button class="btn btn-secondary" onclick="resetLevel(1)">é‡ç½®</button>
            </div>
        </div>

        <!-- ç¬¬2å…³ï¼šéå†æŒ‘æˆ˜å…³å¡ -->
        <div class="level-screen" id="level-2">
            <div class="navigation">
                <button class="btn" onclick="goToLevelSelect()">â† è¿”å›å…³å¡é€‰æ‹©</button>
                <button class="btn btn-secondary" onclick="showHint(2)">æç¤º ğŸ’¡</button>
            </div>
            <h2>ç¬¬2å…³ï¼šéå†æŒ‘æˆ˜å…³å¡ ğŸ”</h2>
            <div class="level-objective">
                <h3>å­¦ä¹ ç›®æ ‡</h3>
                <p>æŒæ¡"ç½‘æ ¼æ»‘çª—"éå†æ¦‚å¿µ</p>
            </div>
            <div class="instruction">
                <p>åœ¨è¿™ä¸ªå…³å¡ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ç”¨åµŒå¥—å¾ªç¯"æ‰«æ"æ•´ä¸ªç½‘æ ¼ã€‚</p>
                <p>å°†é¼ æ ‡æ‚¬åœåœ¨ç½‘æ ¼ä¸Šï¼Œè§‚å¯Ÿä»¥è¯¥ç‚¹ä¸ºå·¦ä¸Šè§’æ—¶çš„4Ã—4çŸ©å½¢åŒºåŸŸã€‚</p>
                <p>å°è¯•æ‰¾å‡ºæ‰€æœ‰å¯èƒ½æ”¾ç½®4Ã—4å­å›¾çš„æœ‰æ•ˆä½ç½®ã€‚</p>
                <p><strong>æ¢ç´¢å®Œæˆåï¼Œè¯·ç‚¹å‡»"å®Œæˆç»ƒä¹ "æŒ‰é’®æäº¤å…³å¡ã€‚</strong></p>
            </div>

            <div class="hint-box" id="level2-hint" style="display: none;">
                <p>æç¤ºï¼šæœ‰æ•ˆçš„ä½ç½®æ˜¯æŒ‡ä¸ä¼šè®©4Ã—4å­å›¾è¶…å‡ºæ•´ä¸ªç½‘æ ¼è¾¹ç•Œçš„ä½ç½®ã€‚</p>
                <p>åœ¨10Ã—10çš„ç½‘æ ¼ä¸­ï¼Œå·¦ä¸Šè§’åæ ‡(i,j)çš„å–å€¼èŒƒå›´æ˜¯ä»€ä¹ˆï¼Ÿ</p>
            </div>

            <div class="grid-container">
                <div class="grid" id="level2-grid"></div>
            </div>

            <div class="feedback" id="level2-feedback"></div>
            <div class="controls">
                <button class="btn" onclick="checkLevel2Completion()">å®Œæˆç»ƒä¹ </button>
                <button class="btn btn-secondary" onclick="resetLevel(2)">é‡ç½®</button>
            </div>

            <div class="code-example">
                <p>åœ¨ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨åµŒå¥—å¾ªç¯æ¥éå†æ‰€æœ‰å¯èƒ½çš„ä½ç½®ï¼š</p>
                <pre>for i from 0 to 6:
    for j from 0 to 6:
        æ£€æŸ¥ä»¥(i,j)ä¸ºå·¦ä¸Šè§’çš„4Ã—4å­å›¾</pre>
                <p>ä¸ºä»€ä¹ˆæ˜¯åˆ°6è€Œä¸æ˜¯9ï¼Ÿå› ä¸º4Ã—4çš„å­å›¾éœ€è¦4ä¸ªä½ç½®ï¼Œæ‰€ä»¥iå’Œjæœ€å¤§åªèƒ½æ˜¯10-4=6ã€‚</p>
            </div>
        </div>

        <!-- ç¬¬3å…³ï¼šç‚¹å‡»åˆ¤æ–­æŒ‘æˆ˜ -->
        <div class="level-screen" id="level-3">
            <div class="navigation">
                <button class="btn" onclick="goToLevelSelect()">â† è¿”å›å…³å¡é€‰æ‹©</button>
                <button class="btn btn-secondary" onclick="showHint(3)">æç¤º ğŸ’¡</button>
            </div>
            <h2>ç¬¬3å…³ï¼šç‚¹å‡»åˆ¤æ–­æŒ‘æˆ˜ ğŸ‘†</h2>
            <div class="level-objective">
                <h3>å­¦ä¹ ç›®æ ‡</h3>
                <p>æŒæ¡æ‰‹åŠ¨æ£€æŸ¥å­å›¾å½¢å¹¶éªŒè¯çš„æ–¹æ³•</p>
            </div>
            <div class="instruction">
                <p>åœ¨è¿™ä¸ªå…³å¡ä¸­ï¼Œä½ éœ€è¦ç‚¹å‡»ç½‘æ ¼ä¸Šçš„ä½ç½®æ¥é€‰æ‹©4Ã—4å­å›¾çš„å·¦ä¸Šè§’ã€‚</p>
                <p>ç³»ç»Ÿä¼šé«˜äº®æ˜¾ç¤ºä½ é€‰æ‹©çš„åŒºåŸŸï¼Œå¹¶åˆ¤æ–­æ˜¯å¦ç¬¦åˆç›®æ ‡å›¾æ¡ˆè§„åˆ™ã€‚</p>
                <p>å°è¯•æ‰¾å‡ºæ‰€æœ‰ç¬¦åˆè§„åˆ™çš„ä½ç½®ï¼</p>
            </div>

            <div class="pattern-example">
                <h3>ç›®æ ‡å›¾æ¡ˆï¼š</h3>
                <div class="small-grid">
                    <!-- ç¬¬1è¡Œï¼š0000 -->
                    <div class="small-cell"></div>
                    <div class="small-cell"></div>
                    <div class="small-cell"></div>
                    <div class="small-cell"></div>
                    <!-- ç¬¬2è¡Œï¼š0110 -->
                    <div class="small-cell"></div>
                    <div class="small-cell black"></div>
                    <div class="small-cell black"></div>
                    <div class="small-cell"></div>
                    <!-- ç¬¬3è¡Œï¼š0110 -->
                    <div class="small-cell"></div>
                    <div class="small-cell black"></div>
                    <div class="small-cell black"></div>
                    <div class="small-cell"></div>
                    <!-- ç¬¬4è¡Œï¼š0000 -->
                    <div class="small-cell"></div>
                    <div class="small-cell"></div>
                    <div class="small-cell"></div>
                    <div class="small-cell"></div>
                </div>
            </div>

            <div class="grid-container">
                <div class="grid" id="level3-grid"></div>
            </div>

            <div class="feedback" id="level3-feedback"></div>
            <div class="controls">
                <button class="btn" onclick="checkSelectedPattern()">æ£€æŸ¥æ‰€é€‰åŒºåŸŸ</button>
                <button class="btn btn-secondary" onclick="resetLevel(3)">é‡ç½®</button>
            </div>

            <div class="progress-container">
                <p>å·²æ‰¾åˆ°: <span id="found-count">0</span>/<span id="total-patterns">3</span> ä¸ªç¬¦åˆæ¡ä»¶çš„å›¾æ¡ˆ</p>
                <div class="progress-bar">
                    <div class="progress-fill" id="level3-progress" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <!-- ç¬¬4å…³ï¼šè‡ªåŠ¨æŸ¥æ‰¾æ¨¡æ‹Ÿ -->
        <div class="level-screen" id="level-4">
            <div class="navigation">
                <button class="btn" onclick="goToLevelSelect()">â† è¿”å›å…³å¡é€‰æ‹©</button>
                <button class="btn btn-secondary" onclick="showHint(4)">æç¤º ğŸ’¡</button>
            </div>
            <h2>ç¬¬4å…³ï¼šè‡ªåŠ¨æŸ¥æ‰¾æ¨¡æ‹Ÿ ğŸ¤–</h2>
            <div class="level-objective">
                <h3>å­¦ä¹ ç›®æ ‡</h3>
                <p>ç†è§£è‡ªåŠ¨æŸ¥æ‰¾åŒ¹é…å›¾æ¡ˆçš„ä»£ç é€»è¾‘</p>
            </div>
            <div class="instruction">
                <p>åœ¨è¿™ä¸ªå…³å¡ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•å®ç°è‡ªåŠ¨æŸ¥æ‰¾åŒ¹é…å›¾æ¡ˆçš„ä»£ç é€»è¾‘ã€‚</p>
                <p>ç‚¹å‡»"å¼€å§‹è‡ªåŠ¨æŸ¥æ‰¾"æŒ‰é’®ï¼Œè§‚å¯Ÿç³»ç»Ÿå¦‚ä½•éå†ç½‘æ ¼å¹¶æ‰¾åˆ°ç¬¦åˆè§„åˆ™çš„å›¾æ¡ˆã€‚</p>
            </div>

            <div class="grid-container">
                <div class="grid" id="level4-grid"></div>
            </div>

            <div class="feedback" id="level4-feedback"></div>
            <div class="controls">
                <button class="btn" onclick="startAutoSearch()">å¼€å§‹è‡ªåŠ¨æŸ¥æ‰¾</button>
                <button class="btn btn-secondary" onclick="resetLevel(4)">é‡ç½®</button>
            </div>

            <div class="code-example">
                <p>è‡ªåŠ¨æŸ¥æ‰¾çš„æ ¸å¿ƒä»£ç é€»è¾‘ï¼š</p>
                <pre>function checkPattern(i, j) {
    // æ£€æŸ¥ä»¥(i,j)ä¸ºå·¦ä¸Šè§’çš„4Ã—4åŒºåŸŸ
    // ç¬¬1è¡Œï¼š0000
    if (grid[i][j] != 0 || grid[i][j+1] != 0 || grid[i][j+2] != 0 || grid[i][j+3] != 0)
        return false;
    
    // ç¬¬2è¡Œï¼š0110
    if (grid[i+1][j] != 0 || grid[i+1][j+1] != 1 || grid[i+1][j+2] != 1 || grid[i+1][j+3] != 0)
        return false;
    
    // ç¬¬3è¡Œï¼š0110
    if (grid[i+2][j] != 0 || grid[i+2][j+1] != 1 || grid[i+2][j+2] != 1 || grid[i+2][j+3] != 0)
        return false;
    
    // ç¬¬4è¡Œï¼š0000
    if (grid[i+3][j] != 0 || grid[i+3][j+1] != 0 || grid[i+3][j+2] != 0 || grid[i+3][j+3] != 0)
        return false;
    
    return true;
}

// éå†æ‰€æœ‰å¯èƒ½çš„ä½ç½®
for (let i = 0; i <= 6; i++) {
    for (let j = 0; j <= 6; j++) {
        if (checkPattern(i, j)) {
            // æ‰¾åˆ°åŒ¹é…çš„å›¾æ¡ˆ
            highlightPattern(i, j);
        }
    }
}</pre>
            </div>
        </div>

        <!-- ç¬¬5å…³ï¼šåå‘æŒ‘æˆ˜ -->
        <div class="level-screen" id="level-5">
            <div class="navigation">
                <button class="btn" onclick="goToLevelSelect()">â† è¿”å›å…³å¡é€‰æ‹©</button>
                <button class="btn btn-secondary" onclick="showHint(5)">æç¤º ğŸ’¡</button>
            </div>
            <h2>ç¬¬5å…³ï¼šåå‘æŒ‘æˆ˜ ğŸ¨</h2>
            <div class="level-objective">
                <h3>å­¦ä¹ ç›®æ ‡</h3>
                <p>è‡ªå·±è®¾è®¡å›¾æ¡ˆï¼ŒæŒ‘æˆ˜ç³»ç»Ÿè¯†åˆ«</p>
            </div>
            <div class="instruction">
                <p>åœ¨è¿™ä¸ªå…³å¡ä¸­ï¼Œä½ å°†æˆä¸ºå‡ºé¢˜è€…ï¼</p>
                <p>åœ¨ä¸‹é¢çš„4Ã—4ç½‘æ ¼ä¸­è®¾è®¡ä¸€ä¸ªå›¾æ¡ˆï¼Œç„¶åè®©ç³»ç»Ÿåˆ¤æ–­å®ƒæ˜¯å¦ç¬¦åˆç›®æ ‡è§„åˆ™ã€‚</p>
                <p>å°è¯•è®¾è®¡å‡ ä¸ªä¸åŒçš„å›¾æ¡ˆï¼Œçœ‹çœ‹ç³»ç»Ÿèƒ½å¦æ­£ç¡®è¯†åˆ«å®ƒä»¬æ˜¯å¦ç¬¦åˆè§„åˆ™ã€‚</p>
            </div>

            <div class="pattern-example">
                <h3>è®¾è®¡ä½ çš„å›¾æ¡ˆï¼š</h3>
                <div class="small-grid" id="design-grid">
                    <div class="small-cell" onclick="toggleCell(this)"></div>
                    <div class="small-cell" onclick="toggleCell(this)"></div>
                    <div class="small-cell" onclick="toggleCell(this)"></div>
                    <div class="small-cell" onclick="toggleCell(this)"></div>
                    <div class="small-cell" onclick="toggleCell(this)"></div>
                    <div class="small-cell" onclick="toggleCell(this)"></div>
                    <div class="small-cell" onclick="toggleCell(this)"></div>
                    <div class="small-cell" onclick="toggleCell(this)"></div>
                    <div class="small-cell" onclick="toggleCell(this)"></div>
                    <div class="small-cell" onclick="toggleCell(this)"></div>
                    <div class="small-cell" onclick="toggleCell(this)"></div>
                    <div class="small-cell" onclick="toggleCell(this)"></div>
                    <div class="small-cell" onclick="toggleCell(this)"></div>
                    <div class="small-cell" onclick="toggleCell(this)"></div>
                    <div class="small-cell" onclick="toggleCell(this)"></div>
                    <div class="small-cell" onclick="toggleCell(this)"></div>
                </div>
            </div>

            <div class="feedback" id="level5-feedback"></div>
            <div class="controls">
                <button class="btn" onclick="evaluateDesign()">è¯„ä¼°æˆ‘çš„è®¾è®¡</button>
                <button class="btn btn-secondary" onclick="randomDesign()">éšæœºç”Ÿæˆ</button>
                <button class="btn btn-secondary" onclick="clearDesign()">æ¸…ç©º</button>
            </div>
        </div>

        <!-- é€šå…³å¼¹çª— -->
        <div class="congrats-modal" id="congrats-modal">
            <div class="modal-content">
                <h2>ğŸ‰ æ­å–œä½ ï¼</h2>
                <p id="congrats-message"></p>
                <div id="achievement-unlocked" style="font-size: 3rem; margin: 20px 0;">ğŸ†</div>
                <button class="btn btn-success" onclick="closeModal()">ç»§ç»­ â†’</button>
            </div>
        </div>
    </div>

    <script>
        // æ¸¸æˆçŠ¶æ€
        let gameState = {
            currentLevel: 0,
            selectedPattern: null,
            selectedPosition: null,
            foundPatterns: [],
            levelCompleted: [false, false, false, false, false], // 5 levels
            hintsUsed: [0, 0, 0, 0, 0],
            achievements: []
        };

        // ç›®æ ‡å›¾æ¡ˆæ•°æ®
        const TARGET_PATTERN = [
            [0, 0, 0, 0],
            [0, 1, 1, 0],
            [0, 1, 1, 0],
            [0, 0, 0, 0]
        ];

        // ç¬¬3å…³å’Œç¬¬4å…³çš„ç½‘æ ¼æ•°æ®
        const LEVEL3_GRID = [
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 1, 1, 0, 0, 0, 0, 0],
            [0, 0, 0, 1, 1, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 1, 1, 0],
            [0, 0, 0, 0, 0, 0, 0, 1, 1, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        ];

        // ç¬¬4å…³çš„ç½‘æ ¼æ•°æ®ï¼ˆåŒ…å«å¤šä¸ªç›®æ ‡å›¾æ¡ˆï¼‰
        const LEVEL4_GRID = [
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 1, 1, 0, 0, 0, 0, 0],
            [0, 0, 0, 1, 1, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 1, 1, 0],
            [0, 0, 0, 0, 0, 0, 0, 1, 1, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 1, 1, 0, 0, 0, 0, 0, 0],
            [0, 0, 1, 1, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
        ];

        // åˆå§‹åŒ–æ¸¸æˆ
        function startGame() {
            document.getElementById('welcome-screen').style.display = 'none';
            document.getElementById('level-select-screen').style.display = 'block';
            updateLevelProgress();
        }

        // é€‰æ‹©å…³å¡
        function selectLevel(level) {
            // åªæœ‰ç¬¬1å…³å’Œå·²å®Œæˆçš„å…³å¡å¯ä»¥é€‰æ‹©
            if (level === 1 || gameState.levelCompleted[level - 2]) {
                gameState.currentLevel = level;
                
                // éšè—æ‰€æœ‰å…³å¡
                document.querySelectorAll('.level-screen').forEach(screen => {
                    screen.classList.remove('active');
                });
                
                // æ˜¾ç¤ºé€‰ä¸­çš„å…³å¡
                document.getElementById(`level-${level}`).classList.add('active');
                document.getElementById('level-select-screen').style.display = 'none';
                
                // åˆå§‹åŒ–å…³å¡
                initLevel(level);
            } else {
                showFeedback('level-select-screen', 'è¯·å…ˆå®Œæˆå‰é¢çš„å…³å¡ï¼', 'incorrect');
            }
        }

        // è¿”å›å…³å¡é€‰æ‹©
        function goToLevelSelect() {
            document.querySelectorAll('.level-screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById('level-select-screen').style.display = 'block';
        }

        // åˆå§‹åŒ–å…³å¡
        function initLevel(level) {
            switch(level) {
                case 1:
                    initLevel1();
                    break;
                case 2:
                    initLevel2();
                    break;
                case 3:
                    initLevel3();
                    break;
                case 4:
                    initLevel4();
                    break;
                case 5:
                    initLevel5();
                    break;
            }
        }

        // åˆå§‹åŒ–ç¬¬1å…³
        function initLevel1() {
            gameState.selectedPattern = null;
            document.querySelectorAll('.pattern-choice').forEach(choice => {
                choice.classList.remove('selected');
            });
            showFeedback('level1-feedback', 'è¯·é€‰æ‹©ä½ è®¤ä¸ºç¬¦åˆç›®æ ‡å›¾æ¡ˆè§„åˆ™çš„é€‰é¡¹', '');
        }

        // åˆå§‹åŒ–ç¬¬2å…³
        function initLevel2() {
            const grid = document.getElementById('level2-grid');
            grid.innerHTML = '';
            
            // åˆ›å»º10x10ç½‘æ ¼
            for (let i = 0; i < 10; i++) {
                for (let j = 0; j < 10; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.dataset.row = i;
                    cell.dataset.col = j;
                    
                    // æ·»åŠ æ‚¬åœæ•ˆæœ
                    cell.addEventListener('mouseenter', function() {
                        highlightArea(i, j, 'level2-grid');
                    });
                    
                    // æ·»åŠ é¼ æ ‡ç¦»å¼€äº‹ä»¶
                    grid.addEventListener('mouseleave', function() {
                        clearHighlights('level2-grid');
                    });
                    
                    grid.appendChild(cell);
                }
            }
            
            showFeedback('level2-feedback', 'å°†é¼ æ ‡æ‚¬åœåœ¨ç½‘æ ¼ä¸Šï¼Œè§‚å¯Ÿ4Ã—4çš„é€‰æ‹©åŒºåŸŸ', '');
        }

        // åˆå§‹åŒ–ç¬¬3å…³
        function initLevel3() {
            const grid = document.getElementById('level3-grid');
            grid.innerHTML = '';
            gameState.selectedPosition = null;
            gameState.foundPatterns = [];
            
            // åˆ›å»º10x10ç½‘æ ¼
            for (let i = 0; i < 10; i++) {
                for (let j = 0; j < 10; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell' + (LEVEL3_GRID[i][j] ? ' black' : '');
                    cell.dataset.row = i;
                    cell.dataset.col = j;
                    
                    // æ·»åŠ ç‚¹å‡»äº‹ä»¶
                    cell.addEventListener('click', function() {
                        selectPosition(i, j, 'level3-grid');
                    });
                    
                    grid.appendChild(cell);
                }
            }
            
            document.getElementById('found-count').textContent = '0';
            document.getElementById('level3-progress').style.width = '0%';
            showFeedback('level3-feedback', 'ç‚¹å‡»ç½‘æ ¼é€‰æ‹©4Ã—4å­å›¾çš„å·¦ä¸Šè§’ä½ç½®', '');
        }

        // åˆå§‹åŒ–ç¬¬4å…³
        function initLevel4() {
            const grid = document.getElementById('level4-grid');
            grid.innerHTML = '';
            
            // åˆ›å»º10x10ç½‘æ ¼
            for (let i = 0; i < 10; i++) {
                for (let j = 0; j < 10; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell' + (LEVEL4_GRID[i][j] ? ' black' : '');
                    cell.dataset.row = i;
                    cell.dataset.col = j;
                    
                    grid.appendChild(cell);
                }
            }
            
            showFeedback('level4-feedback', 'ç‚¹å‡»"å¼€å§‹è‡ªåŠ¨æŸ¥æ‰¾"æŒ‰é’®ï¼Œè§‚å¯Ÿç³»ç»Ÿå¦‚ä½•å¯»æ‰¾å›¾æ¡ˆ', '');
        }

        // åˆå§‹åŒ–ç¬¬5å…³
        function initLevel5() {
            clearDesign();
            showFeedback('level5-feedback', 'åœ¨4Ã—4ç½‘æ ¼ä¸­è®¾è®¡ä½ çš„å›¾æ¡ˆï¼Œç„¶åç‚¹å‡»"è¯„ä¼°æˆ‘çš„è®¾è®¡"', '');
        }

        // é€‰æ‹©å›¾æ¡ˆï¼ˆç¬¬1å…³ï¼‰
        function selectPattern(patternId, element) {
            gameState.selectedPattern = patternId;
            
            // ç§»é™¤å…¶ä»–é€‰é¡¹çš„é€‰ä¸­çŠ¶æ€
            document.querySelectorAll('.pattern-choice').forEach(choice => {
                choice.classList.remove('selected');
            });
            
            // æ·»åŠ å½“å‰é€‰é¡¹çš„é€‰ä¸­çŠ¶æ€
            element.classList.add('selected');
        }

        // æ£€æŸ¥ç­”æ¡ˆï¼ˆç¬¬1å…³ï¼‰
        function checkAnswer() {
            if (gameState.selectedPattern === null) {
                showFeedback('level1-feedback', 'è¯·å…ˆé€‰æ‹©ä¸€ä¸ªé€‰é¡¹', 'incorrect');
                return;
            }
            
            // åªæœ‰é€‰é¡¹1æ˜¯æ­£ç¡®çš„
            if (gameState.selectedPattern === 1) {
                showFeedback('level1-feedback', 'ğŸ‰ æ­£ç¡®ï¼è¿™ä¸ªå›¾æ¡ˆç¬¦åˆç›®æ ‡è§„åˆ™ã€‚', 'correct');
                gameState.levelCompleted[0] = true;
                updateLevelProgress();
                setTimeout(() => {
                    showCongratulations('ä½ å·²æˆåŠŸå®Œæˆç¬¬1å…³ï¼', 'ä½ å­¦ä¼šäº†è¯†åˆ«ç›®æ ‡å›¾æ¡ˆçš„ç‰¹å¾ï¼');
                }, 1000);
            } else {
                showFeedback('level1-feedback', 'âŒ ä¸æ­£ç¡®ï¼Œè¯·å†ä»”ç»†è§‚å¯Ÿç›®æ ‡å›¾æ¡ˆçš„è§„åˆ™ã€‚', 'incorrect');
            }
        }

        // é«˜äº®æ˜¾ç¤ºåŒºåŸŸ
        function highlightArea(i, j, gridId) {
            clearHighlights(gridId);
            
            // æ£€æŸ¥æ˜¯å¦è¶…å‡ºè¾¹ç•Œ
            if (i + 3 >= 10 || j + 3 >= 10) {
                showFeedback(`${gridId.split('-')[0]}-feedback`, 'è¿™ä¸ªä½ç½®ä¼šå¯¼è‡´4Ã—4å­å›¾è¶…å‡ºç½‘æ ¼è¾¹ç•Œï¼', 'incorrect');
                return;
            }
            
            const grid = document.getElementById(gridId);
            
            // é«˜äº®æ˜¾ç¤º4Ã—4åŒºåŸŸ
            for (let x = i; x < i + 4; x++) {
                for (let y = j; y < j + 4; y++) {
                    const index = x * 10 + y;
                    grid.children[index].classList.add('highlighted');
                }
            }
            
            showFeedback(`${gridId.split('-')[0]}-feedback`, `é€‰ä¸­åŒºåŸŸ: å·¦ä¸Šè§’(${i+1}, ${j+1})`, '');
        }

        // æ¸…é™¤é«˜äº®
        function clearHighlights(gridId) {
            const grid = document.getElementById(gridId);
            if (grid) {
                for (let child of grid.children) {
                    child.classList.remove('highlighted');
                }
            }
        }

        // é€‰æ‹©ä½ç½®
        function selectPosition(i, j, gridId) {
            // æ£€æŸ¥æ˜¯å¦è¶…å‡ºè¾¹ç•Œ
            if (i + 3 >= 10 || j + 3 >= 10) {
                showFeedback(`${gridId.split('-')[0]}-feedback`, 'è¿™ä¸ªä½ç½®ä¼šå¯¼è‡´4Ã—4å­å›¾è¶…å‡ºç½‘æ ¼è¾¹ç•Œï¼', 'incorrect');
                return;
            }
            
            gameState.selectedPosition = {i, j};
            highlightArea(i, j, gridId);
        }

        // æ£€æŸ¥æ‰€é€‰åŒºåŸŸï¼ˆç¬¬3å…³ï¼‰
        function checkSelectedPattern() {
            if (!gameState.selectedPosition) {
                showFeedback('level3-feedback', 'è¯·å…ˆé€‰æ‹©ä¸€ä¸ªä½ç½®', 'incorrect');
                return;
            }
            
            const {i, j} = gameState.selectedPosition;
            let isMatch = true;
            
            // æ£€æŸ¥æ˜¯å¦ç¬¦åˆç›®æ ‡å›¾æ¡ˆ
            for (let x = 0; x < 4; x++) {
                for (let y = 0; y < 4; y++) {
                    // å¯¹äºç¬¬2è¡Œå’Œç¬¬3è¡Œçš„ä¸­é—´ä¸¤åˆ—ï¼Œåº”è¯¥æ˜¯é»‘è‰²
                    if ((x === 1 || x === 2) && (y === 1 || y === 2)) {
                        if (!LEVEL3_GRID[i + x][j + y]) {
                            isMatch = false;
                            break;
                        }
                    } else {
                        // å…¶ä»–ä½ç½®åº”è¯¥æ˜¯ç™½è‰²
                        if (LEVEL3_GRID[i + x][j + y]) {
                            isMatch = false;
                            break;
                        }
                    }
                }
                if (!isMatch) break;
            }
            
            if (isMatch) {
                // æ£€æŸ¥æ˜¯å¦å·²ç»æ‰¾åˆ°è¿‡è¿™ä¸ªä½ç½®
                const positionKey = `${i},${j}`;
                if (gameState.foundPatterns.includes(positionKey)) {
                    showFeedback('level3-feedback', 'ğŸ‰ è¿™ä¸ªä½ç½®ç¬¦åˆè§„åˆ™ï¼Œä½†ä½ å·²ç»æ‰¾åˆ°è¿‡äº†ï¼', 'correct');
                } else {
                    gameState.foundPatterns.push(positionKey);
                    document.getElementById('found-count').textContent = gameState.foundPatterns.length;
                    
                    // æ›´æ–°è¿›åº¦æ¡
                    const progress = (gameState.foundPatterns.length / 3) * 100;
                    document.getElementById('level3-progress').style.width = `${progress}%`;
                    
                    showFeedback('level3-feedback', `ğŸ‰ å¤ªæ£’äº†ï¼ä½ æ‰¾åˆ°äº†ä¸€ä¸ªç¬¦åˆè§„åˆ™çš„å›¾æ¡ˆï¼å·²æ‰¾åˆ° ${gameState.foundPatterns.length}/3 ä¸ª`, 'correct');
                    
                    // æ£€æŸ¥æ˜¯å¦æ‰¾åˆ°æ‰€æœ‰å›¾æ¡ˆ
                    if (gameState.foundPatterns.length === 3) {
                        gameState.levelCompleted[2] = true;
                        updateLevelProgress();
                        setTimeout(() => {
                            showCongratulations('ä½ å·²æˆåŠŸå®Œæˆç¬¬3å…³ï¼', 'ä½ å­¦ä¼šäº†å¦‚ä½•æ‰‹åŠ¨æ£€æŸ¥å­å›¾å½¢å¹¶éªŒè¯ï¼');
                        }, 1000);
                    }
                }
            } else {
                showFeedback('level3-feedback', 'âŒ è¿™ä¸ªä½ç½®ä¸ç¬¦åˆç›®æ ‡å›¾æ¡ˆè§„åˆ™', 'incorrect');
            }
        }

        // å¼€å§‹è‡ªåŠ¨æŸ¥æ‰¾ï¼ˆç¬¬4å…³ï¼‰
        function startAutoSearch() {
            showFeedback('level4-feedback', 'æ­£åœ¨è‡ªåŠ¨æŸ¥æ‰¾å›¾æ¡ˆ...', '');
            
            // ç¦ç”¨æŒ‰é’®é˜²æ­¢é‡å¤ç‚¹å‡»
            document.querySelector('#level-4 .btn').disabled = true;
            
            let foundCount = 0;
            const totalPositions = 7 * 7; // 7x7 possible positions
            let currentPosition = 0;
            
            // æ¨¡æ‹Ÿæœç´¢è¿‡ç¨‹
            const searchInterval = setInterval(() => {
                if (currentPosition < totalPositions) {
                    const i = Math.floor(currentPosition / 7);
                    const j = currentPosition % 7;
                    
                    // é«˜äº®å½“å‰æ£€æŸ¥çš„ä½ç½®
                    highlightArea(i, j, 'level4-grid');
                    
                    // æ£€æŸ¥æ˜¯å¦ç¬¦åˆå›¾æ¡ˆè§„åˆ™
                    let isMatch = true;
                    for (let x = 0; x < 4; x++) {
                        for (let y = 0; y < 4; y++) {
                            // å¯¹äºç¬¬2è¡Œå’Œç¬¬3è¡Œçš„ä¸­é—´ä¸¤åˆ—ï¼Œåº”è¯¥æ˜¯é»‘è‰²
                            if ((x === 1 || x === 2) && (y === 1 || y === 2)) {
                                if (!LEVEL4_GRID[i + x][j + y]) {
                                    isMatch = false;
                                    break;
                                }
                            } else {
                                // å…¶ä»–ä½ç½®åº”è¯¥æ˜¯ç™½è‰²
                                if (LEVEL4_GRID[i + x][j + y]) {
                                    isMatch = false;
                                    break;
                                }
                            }
                        }
                        if (!isMatch) break;
                    }
                    
                    if (isMatch) {
                        foundCount++;
                        showFeedback('level4-feedback', `æ‰¾åˆ°åŒ¹é…å›¾æ¡ˆï¼ä½ç½®: (${i+1}, ${j+1})`, 'correct');
                    } else {
                        showFeedback('level4-feedback', `æ£€æŸ¥ä½ç½®: (${i+1}, ${j+1}) - ä¸åŒ¹é…`, '');
                    }
                    
                    currentPosition++;
                } else {
                    clearInterval(searchInterval);
                    clearHighlights('level4-grid');
                    
                    if (foundCount > 0) {
                        showFeedback('level4-feedback', `æœç´¢å®Œæˆï¼å…±æ‰¾åˆ° ${foundCount} ä¸ªåŒ¹é…å›¾æ¡ˆ`, 'correct');
                        gameState.levelCompleted[3] = true;
                        updateLevelProgress();
                        setTimeout(() => {
                            showCongratulations('ä½ å·²æˆåŠŸå®Œæˆç¬¬4å…³ï¼', 'ä½ å­¦ä¼šäº†å¦‚ä½•å®ç°è‡ªåŠ¨æŸ¥æ‰¾åŒ¹é…å›¾æ¡ˆçš„é€»è¾‘ï¼');
                        }, 1000);
                    } else {
                        showFeedback('level4-feedback', 'æœç´¢å®Œæˆï¼æœªæ‰¾åˆ°åŒ¹é…å›¾æ¡ˆ', 'incorrect');
                    }
                    
                    // é‡æ–°å¯ç”¨æŒ‰é’®
                    document.querySelector('#level-4 .btn').disabled = false;
                }
            }, 300);
        }

        // è¯„ä¼°è®¾è®¡ï¼ˆç¬¬5å…³ï¼‰
        function evaluateDesign() {
            const designGrid = document.getElementById('design-grid');
            const cells = designGrid.querySelectorAll('.small-cell');
            let design = [];
            
            // æ”¶é›†è®¾è®¡å›¾æ¡ˆæ•°æ®
            for (let i = 0; i < 4; i++) {
                let row = [];
                for (let j = 0; j < 4; j++) {
                    row.push(cells[i * 4 + j].classList.contains('black') ? 1 : 0);
                }
                design.push(row);
            }
            
            // æ£€æŸ¥æ˜¯å¦ç¬¦åˆç›®æ ‡è§„åˆ™
            let isMatch = true;
            
            // ç¬¬1è¡Œå’Œç¬¬4è¡Œå¿…é¡»å…¨ç™½
            for (let j = 0; j < 4; j++) {
                if (design[0][j] !== 0 || design[3][j] !== 0) {
                    isMatch = false;
                    break;
                }
            }
            
            // ä¸­é—´ä¸¤è¡Œå¿…é¡»æ˜¯0110
            if (isMatch) {
                if (design[1][0] !== 0 || design[1][1] !== 1 || design[1][2] !== 1 || design[1][3] !== 0) {
                    isMatch = false;
                }
            }
            
            if (isMatch) {
                if (design[2][0] !== 0 || design[2][1] !== 1 || design[2][2] !== 1 || design[2][3] !== 0) {
                    isMatch = false;
                }
            }
            
            if (isMatch) {
                showFeedback('level5-feedback', 'ğŸ‰ ä½ çš„è®¾è®¡ç¬¦åˆç›®æ ‡å›¾æ¡ˆè§„åˆ™ï¼ç³»ç»Ÿè¯†åˆ«æˆåŠŸï¼', 'correct');
                gameState.levelCompleted[4] = true;
                updateLevelProgress();
                setTimeout(() => {
                    showCongratulations('ä½ å·²æˆåŠŸå®Œæˆç¬¬5å…³ï¼', 'ä½ å­¦ä¼šäº†å¦‚ä½•è®¾è®¡ç¬¦åˆè§„åˆ™çš„å›¾æ¡ˆï¼');
                }, 1000);
            } else {
                // åˆ†æä¸ç¬¦åˆçš„åŸå› 
                let reason = '';
                if (design[0].some(cell => cell === 1) || design[3].some(cell => cell === 1)) {
                    reason = 'ç¬¬1è¡Œæˆ–ç¬¬4è¡ŒåŒ…å«é»‘è‰²æ ¼å­ã€‚';
                } else if (design[1][0] !== 0 || design[1][1] !== 1 || design[1][2] !== 1 || design[1][3] !== 0) {
                    reason = 'ç¬¬2è¡Œä¸æ˜¯"0110"ç»“æ„ã€‚';
                } else if (design[2][0] !== 0 || design[2][1] !== 1 || design[2][2] !== 1 || design[2][3] !== 0) {
                    reason = 'ç¬¬3è¡Œä¸æ˜¯"0110"ç»“æ„ã€‚';
                }
                
                showFeedback('level5-feedback', `âŒ ä½ çš„è®¾è®¡ä¸ç¬¦åˆç›®æ ‡å›¾æ¡ˆè§„åˆ™ã€‚åŸå› : ${reason}`, 'incorrect');
            }
        }

        // åˆ‡æ¢å•å…ƒæ ¼é¢œè‰²
        function toggleCell(cell) {
            cell.classList.toggle('black');
        }

        // éšæœºç”Ÿæˆè®¾è®¡
        function randomDesign() {
            const designGrid = document.getElementById('design-grid');
            const cells = designGrid.querySelectorAll('.small-cell');
            
            cells.forEach(cell => {
                cell.classList.remove('black');
                if (Math.random() > 0.7) {
                    cell.classList.add('black');
                }
            });
        }

        // æ¸…ç©ºè®¾è®¡
        function clearDesign() {
            const designGrid = document.getElementById('design-grid');
            const cells = designGrid.querySelectorAll('.small-cell');
            
            cells.forEach(cell => {
                cell.classList.remove('black');
            });
        }

        // æ£€æŸ¥ç¬¬2å…³å®Œæˆæƒ…å†µ
        function checkLevel2Completion() {
            gameState.levelCompleted[1] = true;
            updateLevelProgress();
            showFeedback('level2-feedback', 'ğŸ‰ æ­å–œä½ å®Œæˆäº†éå†ç»ƒä¹ ï¼', 'correct');
            setTimeout(() => {
                showCongratulations('ä½ å·²æˆåŠŸå®Œæˆç¬¬2å…³ï¼', 'ä½ å­¦ä¼šäº†å¦‚ä½•ç”¨"ç½‘æ ¼æ»‘çª—"éå†æ¦‚å¿µï¼');
            }, 1000);
        }

        // æ˜¾ç¤ºæç¤º
        function showHint(level) {
            gameState.hintsUsed[level - 1]++;
            const hintBox = document.getElementById(`level${level}-hint`);
            
            if (hintBox) {
                hintBox.style.display = 'block';
            } else {
                // æ ¹æ®ä¸åŒå…³å¡æ˜¾ç¤ºä¸åŒæç¤º
                let hintText = '';
                switch(level) {
                    case 1:
                        hintText = 'ğŸ’¡ æç¤ºï¼šç›®æ ‡å›¾æ¡ˆçš„ç¬¬1è¡Œå’Œç¬¬4è¡Œå…¨æ˜¯ç™½è‰²ï¼Œä¸­é—´ä¸¤è¡Œçš„ä¸­é—´ä¸¤æ ¼æ˜¯é»‘è‰²ã€‚';
                        break;
                    case 2:
                        hintText = 'ğŸ’¡ æç¤ºï¼šåœ¨10Ã—10çš„ç½‘æ ¼ä¸­ï¼Œæœ‰æ•ˆçš„å·¦ä¸Šè§’ä½ç½®æ˜¯iå’Œjéƒ½ä»0åˆ°6ï¼ˆå…±7ä¸ªä½ç½®ï¼‰ã€‚';
                        break;
                    case 3:
                        hintText = 'ğŸ’¡ æç¤ºï¼šå°è¯•ç‚¹å‡»(3,3)ã€(6,7)æˆ–(9,2)ä½ç½®ã€‚';
                        break;
                    case 4:
                        hintText = 'ğŸ’¡ æç¤ºï¼šè‡ªåŠ¨æŸ¥æ‰¾ä½¿ç”¨åµŒå¥—å¾ªç¯éå†æ‰€æœ‰å¯èƒ½ä½ç½®ï¼Œå¹¶è°ƒç”¨checkPatternå‡½æ•°éªŒè¯ã€‚';
                        break;
                    case 5:
                        hintText = 'ğŸ’¡ æç¤ºï¼šå°è¯•è®¾è®¡ä¸€ä¸ªç¬¦åˆ"ç¬¬1è¡Œå’Œç¬¬4è¡Œå…¨ç™½ï¼Œä¸­é—´ä¸¤è¡Œä¸­é—´ä¸¤æ ¼ä¸ºé»‘"è§„åˆ™çš„å›¾æ¡ˆã€‚';
                        break;
                }
                showFeedback(`level${level}-feedback`, hintText, '');
            }
        }

        // é‡ç½®å…³å¡
        function resetLevel(level) {
            switch(level) {
                case 1:
                    document.querySelectorAll('.pattern-choice').forEach(choice => {
                        choice.classList.remove('selected');
                    });
                    gameState.selectedPattern = null;
                    showFeedback('level1-feedback', 'è¯·é€‰æ‹©ä½ è®¤ä¸ºç¬¦åˆç›®æ ‡å›¾æ¡ˆè§„åˆ™çš„é€‰é¡¹', '');
                    break;
                case 2:
                    initLevel2();
                    break;
                case 3:
                    initLevel3();
                    break;
                case 4:
                    initLevel4();
                    break;
                case 5:
                    initLevel5();
                    break;
            }
        }

        // æ˜¾ç¤ºé”å®šæ¶ˆæ¯
        function showLockedMessage() {
            showFeedback('level-select-screen', 'è¯·å…ˆå®Œæˆå‰é¢çš„å…³å¡æ¥è§£é”æ­¤å…³å¡ï¼', 'incorrect');
        }

        // æ˜¾ç¤ºåé¦ˆ
        function showFeedback(elementId, message, type) {
            const feedbackElement = document.getElementById(elementId) || document.querySelector(`#${elementId} .feedback`);
            if (feedbackElement) {
                feedbackElement.textContent = message;
                feedbackElement.className = 'feedback';
                if (type) {
                    feedbackElement.classList.add(type);
                }
            }
        }

        // æ›´æ–°å…³å¡è¿›åº¦
        function updateLevelProgress() {
            // æ›´æ–°å…³å¡å¡ç‰‡çŠ¶æ€
            const levelCards = document.querySelectorAll('.level-card');
            if (levelCards.length > 0) {
                levelCards.forEach((card, index) => {
                    if (index === 0 || gameState.levelCompleted[index - 1]) {
                        card.classList.remove('locked');
                    } else {
                        card.classList.add('locked');
                    }
                });
            }
            
            // æ›´æ–°è¿›åº¦æ¡
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            if (progressBar && progressText) {
                const completedLevels = gameState.levelCompleted.filter(completed => completed).length;
                const progressPercentage = (completedLevels / gameState.levelCompleted.length) * 100;
                progressBar.style.width = `${progressPercentage}%`;
                progressText.textContent = `${progressPercentage}%`;
            }
            
            // æ›´æ–°æˆå°±å›¾æ ‡
            const achievements = document.querySelectorAll('.achievement');
            if (achievements.length > 0) {
                gameState.levelCompleted.forEach((completed, index) => {
                    if (completed) {
                        achievements[index].classList.remove('locked');
                    } else {
                        achievements[index].classList.add('locked');
                    }
                });
            }
        }

        // æ˜¾ç¤ºæ­å–œå¼¹çª—
        function showCongratulations(title, message) {
            document.getElementById('congrats-message').innerHTML = `<strong>${title}</strong><p>${message}</p>`;
            document.getElementById('congrats-modal').style.display = 'flex';
        }

        // å…³é—­å¼¹çª—
        function closeModal() {
            document.getElementById('congrats-modal').style.display = 'none';
            goToLevelSelect();
        }

    </script>
</body>
</html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>ğŸ§© é»‘ç™½å›¾æ¡ˆä¾¦æ¢å°æ¸¸æˆ</title>
  <style>
    body {
      font-family: "Comic Sans MS", "å¹¼åœ†", sans-serif;
      background-color: #f0f8ff;
      text-align: center;
      padding: 30px;
    }

    h1 {
      color: #ff69b4;
      font-size: 32px;
      margin-bottom: 20px;
    }

    #grid {
      display: grid;
      grid-template-columns: repeat(10, 40px);
      grid-template-rows: repeat(10, 40px);
      gap: 4px;
      justify-content: center;
      margin-bottom: 20px;
    }

    .cell {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      border: 2px solid #ccc;
      background-color: white;
      cursor: pointer;
      transition: 0.2s;
    }

    .black {
      background-color: black;
    }

    .highlight {
      border: 3px solid limegreen !important;
      box-shadow: 0 0 6px #0f0;
    }

    button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 18px;
      border-radius: 10px;
      border: none;
      background-color: #87cefa;
      color: #fff;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background-color: #00bfff;
    }

    #result {
      font-size: 20px;
      font-weight: bold;
      color: #d2691e;
      margin-top: 15px;
    }
  </style>
</head>
<body>
  <h1>ğŸ§© é»‘ç™½å›¾æ¡ˆä¾¦æ¢å°æ¸¸æˆ</h1>

  <div id="grid"></div>

  <button onclick="startScan()">ğŸ” å¼€å§‹æ‰«æ</button>
  <button onclick="resetGrid()">ğŸ”„ é‡ç½®ç½‘æ ¼</button>
  <button onclick="fillSample()">ğŸ æ’å…¥æ ·ä¾‹å›¾æ¡ˆ</button>

  <p id="result"></p>

  <script>
    const ROWS = 10;
    const COLS = 10;
    let grid = [];

    const gridElement = document.getElementById("grid");

    function createGrid() {
      gridElement.innerHTML = '';
      grid = [];
      for (let i = 0; i < ROWS; i++) {
        let row = [];
        for (let j = 0; j < COLS; j++) {
          const cell = document.createElement("div");
          cell.className = "cell";
          cell.dataset.row = i;
          cell.dataset.col = j;
          cell.onclick = () => toggleCell(cell);
          gridElement.appendChild(cell);
          row.push(0); // åˆå§‹ä¸ºç™½è‰²
        }
        grid.push(row);
      }
    }

    function toggleCell(cell) {
      const i = parseInt(cell.dataset.row);
      const j = parseInt(cell.dataset.col);
      if (grid[i][j] === 0) {
        grid[i][j] = 1;
        cell.classList.add("black");
      } else {
        grid[i][j] = 0;
        cell.classList.remove("black");
      }
    }

    function resetGrid() {
      document.getElementById("result").textContent = "";
      createGrid();
    }

    function fillSample() {
      resetGrid();
      const baseRow = 2;
      const baseCol = 3;
      const pattern = [
        [0, 0, 0, 0],
        [0, 1, 1, 0],
        [0, 1, 1, 0],
        [0, 0, 0, 0]
      ];
      for (let i = 0; i < 4; i++) {
        for (let j = 0; j < 4; j++) {
          const r = baseRow + i;
          const c = baseCol + j;
          grid[r][c] = pattern[i][j];
          const cell = getCell(r, c);
          cell.classList.toggle("black", pattern[i][j] === 1);
        }
      }
    }

    function getCell(i, j) {
      return gridElement.querySelector(`.cell[data-row='${i}'][data-col='${j}']`);
    }

    function clearHighlights() {
      const cells = document.querySelectorAll(".cell");
      cells.forEach(cell => cell.classList.remove("highlight"));
    }

    function checkPattern(r, c) {
      if (r + 3 >= ROWS || c + 3 >= COLS) return false;
      // ç¬¬ä¸€è¡Œ & ç¬¬å››è¡Œ
      for (let j = 0; j < 4; j++) {
        if (grid[r][c + j] !== 0 || grid[r + 3][c + j] !== 0) return false;
      }
      // ä¸­é—´ä¸¤è¡Œ
      for (let i = 1; i <= 2; i++) {
        if (
          grid[r + i][c] !== 0 ||
          grid[r + i][c + 1] !== 1 ||
          grid[r + i][c + 2] !== 1 ||
          grid[r + i][c + 3] !== 0
        ) return false;
      }
      return true;
    }

    function startScan() {
      clearHighlights();
      document.getElementById("result").textContent = "æ­£åœ¨æ‰«æ...";
      for (let i = 0; i <= ROWS - 4; i++) {
        for (let j = 0; j <= COLS - 4; j++) {
          if (checkPattern(i, j)) {
            highlightPattern(i, j);
            document.getElementById("result").textContent = "ğŸ‰ æ‰¾åˆ°äº†ä¸€ä¸ªå›¾æ¡ˆï¼";
            return;
          }
        }
      }
      document.getElementById("result").textContent = "ğŸ˜¢ æ²¡æœ‰æ‰¾åˆ°å›¾æ¡ˆï¼Œå†è¯•è¯•çœ‹å§ï½";
    }

    function highlightPattern(r, c) {
      for (let i = 0; i < 4; i++) {
        for (let j = 0; j < 4; j++) {
          getCell(r + i, c + j).classList.add("highlight");
        }
      }
    }

    createGrid();
  </script>
</body>
</html>
