"use strict";(this.webpackChunkChoiceQuestionPlugin=this.webpackChunkChoiceQuestionPlugin||[]).push([[455],{455:function(t,e,s){s.r(e),s.d(e,{default:function(){return r}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrong-question-book"},[e("Panel",{attrs:{shadow:""}},[e("div",{attrs:{slot:"title"},slot:"title"},[e("Icon",{attrs:{type:"ios-bookmark"}}),t._v("\n      我的错题本\n      "),e("Badge",{staticStyle:{"margin-left":"10px"},attrs:{count:t.total}})],1),t._v(" "),e("div",{staticClass:"filter-section"},[e("Row",{attrs:{gutter:10}},[e("Col",{attrs:{span:8}},[e("Select",{attrs:{placeholder:"选择分类",clearable:""},model:{value:t.selectedCategory,callback:function(e){t.selectedCategory=e},expression:"selectedCategory"}},t._l(t.categories,function(s){return e("Option",{key:s.id,attrs:{value:s.id}},[t._v("\n              "+t._s(s.name)+"\n            ")])}),1)],1),t._v(" "),e("Col",{attrs:{span:6}},[e("Button",{attrs:{type:"primary"},on:{click:t.getWrongQuestionList}},[t._v("筛选")]),t._v(" "),e("Button",{staticStyle:{"margin-left":"8px"},on:{click:t.resetFilter}},[t._v("重置")])],1)],1)],1),t._v(" "),e("div",{staticClass:"question-list"},[t.loading?e("div",{staticClass:"loading-container"},[e("Spin",{attrs:{size:"large"}})],1):0===t.wrongQuestions.length?e("div",{staticClass:"empty-container"},[e("div",{staticClass:"empty-content"},[e("Icon",{attrs:{type:"ios-document",size:"64",color:"#c5c8ce"}}),t._v(" "),e("p",[t._v("暂无错题记录")])],1)]):e("div",t._l(t.wrongQuestions,function(s){return e("Card",{key:s.id,staticClass:"question-card",attrs:{bordered:!1,shadow:""}},[e("div",{staticClass:"question-header"},[e("div",{staticClass:"question-title"},[e("Tag",{attrs:{color:1===s.difficulty?"green":2===s.difficulty?"orange":"red"}},[t._v("\n                "+t._s(t.getDifficultyText(s.difficulty))+"\n              ")]),t._v(" "),e("span",{staticClass:"title-text"},[t._v(t._s(s.title))])],1),t._v(" "),e("div",{staticClass:"question-actions"},[e("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.redoQuestion(s)}}},[t._v("\n                重做\n              ")]),t._v(" "),e("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"error",size:"small"},on:{click:function(e){return t.removeFromWrongBook(s.id)}}},[t._v("\n                移除\n              ")])],1)]),t._v(" "),e("div",{staticClass:"question-content"},[e("p",{staticClass:"question-text"},[t._v(t._s(s.content))]),t._v(" "),e("div",{staticClass:"options"},t._l(s.options,function(n,o){return e("div",{key:o,staticClass:"option-item",class:{correct:s.correct_answer.includes(String.fromCharCode(65+o)),wrong:s.user_answer&&s.user_answer.includes(String.fromCharCode(65+o))&&!s.correct_answer.includes(String.fromCharCode(65+o))}},[e("span",{staticClass:"option-label"},[t._v(t._s(String.fromCharCode(65+o))+".")]),t._v(" "),e("span",{staticClass:"option-text"},[t._v(t._s(n))])])}),0)]),t._v(" "),e("div",{staticClass:"question-meta"},[e("span",{staticClass:"meta-item"},[e("Icon",{attrs:{type:"ios-time"}}),t._v("\n              错误时间: "+t._s(t.formatDate(s.created_at))+"\n            ")],1),t._v(" "),e("span",{staticClass:"meta-item"},[e("Icon",{attrs:{type:"ios-repeat"}}),t._v("\n              错误次数: "+t._s(s.wrong_count||1)+"\n            ")],1)])])}),1)]),t._v(" "),t.total>t.pageSize?e("div",{staticClass:"pagination-container"},[e("Page",{attrs:{current:t.currentPage,total:t.total,"page-size":t.pageSize,"show-total":""},on:{"on-change":t.handlePageChange}})],1):t._e()])],1)};n._withStripped=!0;var o=s(683),i={name:"WrongQuestionBook",data(){return{loading:!1,wrongQuestions:[],categories:[],selectedCategory:null,currentPage:1,pageSize:10,total:0}},mounted(){this.loadCategories(),this.getWrongQuestionList()},methods:{async loadCategories(){try{const t=await o.A.getCategoryList();this.categories=t.data.results||[]}catch(t){console.error("加载分类失败:",t)}},async getWrongQuestionList(){this.loading=!0;try{const t={page:this.currentPage,page_size:this.pageSize};this.selectedCategory&&(t.category=this.selectedCategory);const e=await o.A.getWrongQuestionList(t);this.wrongQuestions=e.data.results||[],this.total=e.data.count||0}catch(t){console.error("加载错题列表失败:",t),this.$Message.error("加载错题列表失败")}finally{this.loading=!1}},resetFilter(){this.selectedCategory=null,this.currentPage=1,this.getWrongQuestionList()},handlePageChange(t){this.currentPage=t,this.getWrongQuestionList()},redoQuestion(t){this.$router.push({name:"ChoiceQuestionDetail",params:{id:t.question_id}})},async removeFromWrongBook(t){try{await o.A.removeFromWrongQuestions(t),this.$Message.success("已从错题本移除"),this.getWrongQuestionList()}catch(t){console.error("移除错题失败:",t),this.$Message.error("移除错题失败")}},getDifficultyText(t){return{1:"简单",2:"中等",3:"困难"}[t]||"未知"},formatDate(t){return new Date(t).toLocaleString("zh-CN")}}},r=(0,s(486).A)(i,n,[],!1,null,"72987d80",null).exports},486:function(t,e,s){function n(t,e,s,n,o,i,r,a){var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=s,u._compiled=!0),n&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),r?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},u._ssrRegister=c):o&&(c=a?function(){o.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(t,e){return c.call(e),l(t,e)}}else{var g=u.beforeCreate;u.beforeCreate=g?[].concat(g,c):[c]}return{exports:t,options:u}}s.d(e,{A:function(){return n}})},683:function(t,e){const s=(t,e="get",s={})=>{const n="/api/"+t,o={method:e.toUpperCase(),headers:{"Content-Type":"application/json","X-CSRFToken":document.querySelector("[name=csrfmiddlewaretoken]")?.value||""}};if(s.params){const t=new URLSearchParams(s.params),e=n.includes("?")?"&":"?";o.url=n+e+t.toString()}else o.url=n;return s.data&&["POST","PUT","PATCH"].includes(o.method)&&(o.body=JSON.stringify(s.data)),fetch(o.url,o).then(t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json().then(t=>({data:t}))})};e.A={getCategoryList(){return s("plugin/choice/categories/","get")},createCategory(t){return s("plugin/choice/categories/","post",{data:t})},updateCategory(t,e){return s(`plugin/choice/categories/${t}/`,"put",{data:e})},deleteCategory(t){return s(`plugin/choice/categories/${t}/`,"delete")},getTagList(){return s("plugin/choice/tags/","get")},createTag(t){return s("plugin/choice/tags/","post",{data:t})},updateTag(t,e){return s(`plugin/choice/tags/${t}/`,"put",{data:e})},deleteTag(t){return s(`plugin/choice/tags/${t}/`,"delete")},getQuestionList(t){return s("plugin/choice/questions/","get",{params:t})},getQuestionDetail(t){return s(`plugin/choice/questions/${t}/`,"get")},createQuestion(t){return s("plugin/choice/questions/","post",{data:t})},updateQuestion(t,e){return s(`plugin/choice/questions/${t}/`,"put",{data:e})},deleteQuestion(t){return s(`plugin/choice/questions/${t}/`,"delete")},submitAnswer(t){return s("plugin/choice/submissions/","post",{data:t})},getSubmissionList(t){return s("plugin/choice/submissions/","get",{params:t})},getWrongQuestionList(t){return s("plugin/choice/wrong-questions/","get",{params:t})},addToWrongQuestions(t){return s("plugin/choice/wrong-questions/","post",{data:t})},removeFromWrongQuestions(t){return s(`plugin/choice/wrong-questions/${t}/`,"delete")},updateWrongQuestionNote(t,e){return s(`plugin/choice/wrong-questions/${t}/`,"put",{data:e})},getQuestionStats(){return s("plugin/choice/statistics/","get")},importQuestions(t){return s("plugin/choice/import/","post",{data:t,headers:{"Content-Type":"multipart/form-data"}})},exportQuestions(t){return s("plugin/choice/export/","get",{params:t,responseType:"blob"})},downloadTemplate(t){return s("plugin/choice/template/","get",{params:{format:t},responseType:"blob"})},batchOperation(t){return s("plugin/choice/batch/","post",{data:t})},getImportHistory(t){return s("plugin/choice/import-history/","get",{params:t})}}}}]);
//# sourceMappingURL=455.4d59b9d5043b3774c6af.chunk.js.map