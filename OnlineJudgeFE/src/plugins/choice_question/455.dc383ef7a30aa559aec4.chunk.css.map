{"version":3,"file":"455.dc383ef7a30aa559aec4.chunk.css","mappings":";AA4NA;EACA;AACA;AAEA;EACA;EACA;EACA;EACA;AACA;AAEA;EACA;EACA;AACA;AAEA;EACA;EACA;AACA;AAEA;EACA;EACA;EACA;AACA;AAEA;EACA;AACA;AAEA;EACA;EACA;EACA;EACA;AACA;AAEA;EACA;EACA;AACA;AAEA;EACA;EACA;EACA;AACA;AAEA;EACA;AACA;AAEA;EACA;EACA;AACA;AAEA;EACA;AACA;AAEA;EACA;EACA;EACA;EACA;EACA;EACA;AACA;AAEA;EACA;EACA;AACA;AAEA;EACA;EACA;AACA;AAEA;EACA;EACA;EACA;AACA;AAEA;EACA;EACA;AACA;AAEA;EACA;EACA;EACA;EACA;EACA;EACA;AACA;AAEA;EACA;EACA;AACA;AAEA;EACA;AACA;AAEA;EACA;EACA;AACA","sources":["webpack://ChoiceQuestionPlugin/./views/WrongQuestionBook.vue"],"sourcesContent":["<template>\n  <div class=\"wrong-question-book\">\n    <Panel shadow>\n      <div slot=\"title\">\n        <Icon type=\"ios-bookmark\" />\n        我的错题本\n        <Badge :count=\"total\" style=\"margin-left: 10px\" />\n      </div>\n      \n      <!-- 简化的筛选器 -->\n      <div class=\"filter-section\">\n        <Row :gutter=\"10\">\n          <Col :span=\"8\">\n            <Select v-model=\"selectedCategory\" placeholder=\"选择分类\" clearable>\n              <Option \n                v-for=\"category in categories\" \n                :key=\"category.id\"\n                :value=\"category.id\"\n              >\n                {{ category.name }}\n              </Option>\n            </Select>\n          </Col>\n          <Col :span=\"6\">\n            <Button type=\"primary\" @click=\"getWrongQuestionList\">筛选</Button>\n            <Button @click=\"resetFilter\" style=\"margin-left: 8px\">重置</Button>\n          </Col>\n        </Row>\n      </div>\n\n      <!-- 错题列表 -->\n      <div class=\"question-list\">\n        <div v-if=\"loading\" class=\"loading-container\">\n          <Spin size=\"large\" />\n        </div>\n        <div v-else-if=\"wrongQuestions.length === 0\" class=\"empty-container\">\n          <div class=\"empty-content\">\n            <Icon type=\"ios-document\" size=\"64\" color=\"#c5c8ce\" />\n            <p>暂无错题记录</p>\n          </div>\n        </div>\n        <div v-else>\n          <Card \n            v-for=\"question in wrongQuestions\" \n            :key=\"question.id\"\n            class=\"question-card\"\n            :bordered=\"false\"\n            shadow\n          >\n            <div class=\"question-header\">\n              <div class=\"question-title\">\n                <Tag :color=\"question.difficulty === 1 ? 'green' : question.difficulty === 2 ? 'orange' : 'red'\">\n                  {{ getDifficultyText(question.difficulty) }}\n                </Tag>\n                <span class=\"title-text\">{{ question.title }}</span>\n              </div>\n              <div class=\"question-actions\">\n                <Button \n                  type=\"primary\" \n                  size=\"small\" \n                  @click=\"redoQuestion(question)\"\n                >\n                  重做\n                </Button>\n                <Button \n                  type=\"error\" \n                  size=\"small\" \n                  @click=\"removeFromWrongBook(question.id)\"\n                  style=\"margin-left: 8px\"\n                >\n                  移除\n                </Button>\n              </div>\n            </div>\n            \n            <div class=\"question-content\">\n              <p class=\"question-text\">{{ question.content }}</p>\n              <div class=\"options\">\n                <div \n                  v-for=\"(option, index) in question.options\" \n                  :key=\"index\"\n                  class=\"option-item\"\n                  :class=\"{\n                    'correct': question.correct_answer.includes(String.fromCharCode(65 + index)),\n                    'wrong': question.user_answer && question.user_answer.includes(String.fromCharCode(65 + index)) && !question.correct_answer.includes(String.fromCharCode(65 + index))\n                  }\"\n                >\n                  <span class=\"option-label\">{{ String.fromCharCode(65 + index) }}.</span>\n                  <span class=\"option-text\">{{ option }}</span>\n                </div>\n              </div>\n            </div>\n            \n            <div class=\"question-meta\">\n              <span class=\"meta-item\">\n                <Icon type=\"ios-time\" />\n                错误时间: {{ formatDate(question.created_at) }}\n              </span>\n              <span class=\"meta-item\">\n                <Icon type=\"ios-repeat\" />\n                错误次数: {{ question.wrong_count || 1 }}\n              </span>\n            </div>\n          </Card>\n        </div>\n      </div>\n\n      <!-- 分页 -->\n      <div class=\"pagination-container\" v-if=\"total > pageSize\">\n        <Page \n          :current=\"currentPage\" \n          :total=\"total\" \n          :page-size=\"pageSize\"\n          @on-change=\"handlePageChange\"\n          show-total\n        />\n      </div>\n    </Panel>\n  </div>\n</template>\n\n<script>\nimport api from '../api'\n\nexport default {\n  name: 'WrongQuestionBook',\n  data() {\n    return {\n      loading: false,\n      wrongQuestions: [],\n      categories: [],\n      selectedCategory: null,\n      currentPage: 1,\n      pageSize: 10,\n      total: 0\n    }\n  },\n  mounted() {\n    this.loadCategories()\n    this.getWrongQuestionList()\n  },\n  methods: {\n    async loadCategories() {\n      try {\n        const response = await api.getCategoryList()\n        this.categories = response.data.results || []\n      } catch (error) {\n        console.error('加载分类失败:', error)\n      }\n    },\n    \n    async getWrongQuestionList() {\n      this.loading = true\n      try {\n        const params = {\n          page: this.currentPage,\n          page_size: this.pageSize\n        }\n        if (this.selectedCategory) {\n          params.category = this.selectedCategory\n        }\n        \n        const response = await api.getWrongQuestionList(params)\n        this.wrongQuestions = response.data.results || []\n        this.total = response.data.count || 0\n      } catch (error) {\n        console.error('加载错题列表失败:', error)\n        this.$Message.error('加载错题列表失败')\n      } finally {\n        this.loading = false\n      }\n    },\n    \n    resetFilter() {\n      this.selectedCategory = null\n      this.currentPage = 1\n      this.getWrongQuestionList()\n    },\n    \n    handlePageChange(page) {\n      this.currentPage = page\n      this.getWrongQuestionList()\n    },\n    \n    redoQuestion(question) {\n      // 跳转到答题页面\n      this.$router.push({\n        name: 'ChoiceQuestionDetail',\n        params: { id: question.question_id }\n      })\n    },\n    \n    async removeFromWrongBook(id) {\n      try {\n        await api.removeFromWrongQuestions(id)\n        this.$Message.success('已从错题本移除')\n        this.getWrongQuestionList()\n      } catch (error) {\n        console.error('移除错题失败:', error)\n        this.$Message.error('移除错题失败')\n      }\n    },\n    \n    getDifficultyText(difficulty) {\n      const difficultyMap = {\n        1: '简单',\n        2: '中等', \n        3: '困难'\n      }\n      return difficultyMap[difficulty] || '未知'\n    },\n    \n    formatDate(dateString) {\n      return new Date(dateString).toLocaleString('zh-CN')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.wrong-question-book {\n  padding: 20px;\n}\n\n.filter-section {\n  margin-bottom: 20px;\n  padding: 15px;\n  background: #f8f8f9;\n  border-radius: 4px;\n}\n\n.loading-container {\n  text-align: center;\n  padding: 50px;\n}\n\n.empty-container {\n  text-align: center;\n  padding: 50px;\n}\n\n.empty-content p {\n  margin-top: 15px;\n  color: #c5c8ce;\n  font-size: 14px;\n}\n\n.question-card {\n  margin-bottom: 15px;\n}\n\n.question-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n}\n\n.question-title {\n  display: flex;\n  align-items: center;\n}\n\n.title-text {\n  margin-left: 10px;\n  font-weight: 500;\n  font-size: 16px;\n}\n\n.question-content {\n  margin-bottom: 15px;\n}\n\n.question-text {\n  margin-bottom: 15px;\n  line-height: 1.6;\n}\n\n.options {\n  margin-left: 20px;\n}\n\n.option-item {\n  display: flex;\n  align-items: flex-start;\n  margin-bottom: 8px;\n  padding: 8px;\n  border-radius: 4px;\n  transition: background-color 0.3s;\n}\n\n.option-item.correct {\n  background-color: #f6ffed;\n  border: 1px solid #b7eb8f;\n}\n\n.option-item.wrong {\n  background-color: #fff2f0;\n  border: 1px solid #ffccc7;\n}\n\n.option-label {\n  font-weight: 500;\n  margin-right: 8px;\n  min-width: 20px;\n}\n\n.option-text {\n  flex: 1;\n  line-height: 1.5;\n}\n\n.question-meta {\n  display: flex;\n  justify-content: space-between;\n  color: #999;\n  font-size: 12px;\n  border-top: 1px solid #f0f0f0;\n  padding-top: 10px;\n}\n\n.meta-item {\n  display: flex;\n  align-items: center;\n}\n\n.meta-item i {\n  margin-right: 4px;\n}\n\n.pagination-container {\n  text-align: center;\n  margin-top: 20px;\n}\n</style>"],"names":[],"sourceRoot":""}