"use strict";(this.webpackChunkChoiceQuestionPlugin=this.webpackChunkChoiceQuestionPlugin||[]).push([[227],{227:function(t,e,s){s.r(e),s.d(e,{default:function(){return r}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"choice-question-detail"},[t.question?e("Panel",{attrs:{shadow:""}},[e("div",{attrs:{slot:"title"},slot:"title"},[e("Icon",{attrs:{type:"ios-help-circle"}}),t._v("\n      题目 #"+t._s(t.question._id)+": "+t._s(t.question.title)+"\n    ")],1),t._v(" "),e("div",{attrs:{slot:"extra"},slot:"extra"},[!t.isInWrongQuestions&&t.hasSubmitted?e("Button",{attrs:{type:"error",size:"small"},on:{click:t.addToWrongQuestions}},[e("Icon",{attrs:{type:"ios-bookmark"}}),t._v("\n        加入错题本\n      ")],1):t._e()],1),t._v(" "),e("div",{staticClass:"question-info"},[e("Row",{attrs:{gutter:16}},[e("Col",{attrs:{span:12}},[e("div",{staticClass:"info-item"},[e("span",{staticClass:"label"},[t._v("分类：")]),t._v(" "),e("span",[t._v(t._s(t.question.category?t.question.category.name:"未分类"))])])]),t._v(" "),e("Col",{attrs:{span:12}},[e("div",{staticClass:"info-item"},[e("span",{staticClass:"label"},[t._v("难度：")]),t._v(" "),e("Tag",{attrs:{color:t.getDifficultyColor(t.question.difficulty)}},[t._v("\n              "+t._s(t.getDifficultyText(t.question.difficulty))+"\n            ")])],1)])],1),t._v(" "),e("Row",{staticStyle:{"margin-top":"8px"},attrs:{gutter:16}},[e("Col",{attrs:{span:12}},[e("div",{staticClass:"info-item"},[e("span",{staticClass:"label"},[t._v("题型：")]),t._v(" "),e("span",[t._v(t._s("single"===t.question.question_type?"单选题":"多选题"))])])]),t._v(" "),e("Col",{attrs:{span:12}},[e("div",{staticClass:"info-item"},[e("span",{staticClass:"label"},[t._v("分值：")]),t._v(" "),e("span",[t._v(t._s(t.question.score)+" 分")])])])],1),t._v(" "),t.question.tags&&t.question.tags.length>0?e("div",{staticClass:"info-item",staticStyle:{"margin-top":"8px"}},[e("span",{staticClass:"label"},[t._v("标签：")]),t._v(" "),t._l(t.question.tags,function(s){return e("Tag",{key:s.id,staticStyle:{"margin-right":"4px"},attrs:{color:s.color}},[t._v("\n          "+t._s(s.name)+"\n        ")])})],2):t._e()],1),t._v(" "),e("div",{staticClass:"question-content"},[e("h3",[t._v("题目描述")]),t._v(" "),e("div",{staticClass:"content",domProps:{innerHTML:t._s(t.question.content)}})]),t._v(" "),e("div",{staticClass:"question-options"},[e("h3",[t._v("选项")]),t._v(" "),"single"===t.question.question_type?e("div",[e("RadioGroup",{attrs:{disabled:t.hasSubmitted},model:{value:t.selectedAnswer,callback:function(e){t.selectedAnswer=e},expression:"selectedAnswer"}},t._l(t.question.options,function(s,i){return e("div",{key:i,staticClass:"option-item",class:t.getOptionClass(i)},[e("Radio",{attrs:{label:i}},[e("span",{staticClass:"option-label"},[t._v(t._s(String.fromCharCode(65+i))+".")]),t._v(" "),e("span",{staticClass:"option-content",domProps:{innerHTML:t._s(s)}})])],1)}),0)],1):e("div",[e("CheckboxGroup",{attrs:{disabled:t.hasSubmitted},model:{value:t.selectedAnswers,callback:function(e){t.selectedAnswers=e},expression:"selectedAnswers"}},t._l(t.question.options,function(s,i){return e("div",{key:i,staticClass:"option-item",class:t.getOptionClass(i)},[e("Checkbox",{attrs:{label:i}},[e("span",{staticClass:"option-label"},[t._v(t._s(String.fromCharCode(65+i))+".")]),t._v(" "),e("span",{staticClass:"option-content",domProps:{innerHTML:t._s(s)}})])],1)}),0)],1)]),t._v(" "),t.hasSubmitted?t._e():e("div",{staticClass:"submit-section"},[e("Button",{attrs:{type:"primary",size:"large",loading:t.submitting,disabled:!t.canSubmit},on:{click:t.submitAnswer}},[t._v("\n        提交答案\n      ")])],1),t._v(" "),t.hasSubmitted?e("div",{staticClass:"answer-analysis"},[e("Divider",[t._v("答案解析")]),t._v(" "),e("div",{staticClass:"result-info"},[e("Alert",{attrs:{type:t.isCorrect?"success":"error","show-icon":!0}},[e("span",{attrs:{slot:"desc"},slot:"desc"},[t._v("\n            "+t._s(t.isCorrect?"回答正确！":"回答错误！")+"\n            得分："+t._s(t.currentScore)+" / "+t._s(t.question.score)+"\n          ")])])],1),t._v(" "),e("div",{staticClass:"correct-answer"},[e("h4",[t._v("正确答案")]),t._v(" "),"single"===t.question.question_type?e("div",[e("span",{staticClass:"answer-label"},[t._v(t._s(String.fromCharCode(65+t.question.correct_answer[0])))])]):e("div",t._l(t.question.correct_answer,function(s,i){return e("span",{key:i,staticClass:"answer-label",staticStyle:{"margin-right":"8px"}},[t._v("\n            "+t._s(String.fromCharCode(65+s))+"\n          ")])}),0)]),t._v(" "),t.question.explanation?e("div",{staticClass:"explanation"},[e("h4",[t._v("解析")]),t._v(" "),e("div",{staticClass:"content",domProps:{innerHTML:t._s(t.question.explanation)}})]):t._e()],1):t._e()]):e("div",{staticClass:"loading-container"},[e("Spin",{attrs:{size:"large"}},[t._v("加载中...")])],1)],1)};i._withStripped=!0;var n=s(683),o={name:"ChoiceQuestionDetail",data(){return{question:null,selectedAnswer:null,selectedAnswers:[],hasSubmitted:!1,submitting:!1,isCorrect:!1,currentScore:0,isInWrongQuestions:!1}},computed:{questionId(){return this.$route.params.id},canSubmit(){return"single"===this.question?.question_type?null!==this.selectedAnswer:this.selectedAnswers.length>0}},mounted(){this.getQuestionDetail()},methods:{async getQuestionDetail(){try{const t=await n.A.getQuestionDetail(this.questionId);this.question=t.data.data}catch(t){this.$Message.error("获取题目详情失败"),console.error(t)}},async submitAnswer(){this.submitting=!0;try{let t;t="single"===this.question.question_type?[this.selectedAnswer]:this.selectedAnswers.sort((t,e)=>t-e);const e=(await n.A.submitAnswer({question_id:this.question._id,user_answer:t})).data.data;this.hasSubmitted=!0,this.isCorrect=e.is_correct,this.currentScore=e.score,this.$Message.success("提交成功！")}catch(t){this.$Message.error("提交失败"),console.error(t)}finally{this.submitting=!1}},async addToWrongQuestions(){try{await n.A.addToWrongQuestions({question_id:this.question._id}),this.isInWrongQuestions=!0,this.$Message.success("已加入错题本")}catch(t){this.$Message.error("加入错题本失败"),console.error(t)}},getDifficultyColor(t){return{1:"success",2:"warning",3:"error"}[t]||"default"},getDifficultyText(t){return{1:"简单",2:"中等",3:"困难"}[t]||"未知"},getOptionClass(t){if(!this.hasSubmitted)return"";const e=this.question.correct_answer.includes(t);let s=!1;return s="single"===this.question.question_type?this.selectedAnswer===t:this.selectedAnswers.includes(t),e?"option-correct":s&&!e?"option-wrong":""}}},r=(0,s(486).A)(o,i,[],!1,null,"cf59b808",null).exports},486:function(t,e,s){function i(t,e,s,i,n,o,r,a){var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=s,u._compiled=!0),i&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),r?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},u._ssrRegister=c):n&&(c=a?function(){n.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:n),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(t,e){return c.call(e),l(t,e)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:t,options:u}}s.d(e,{A:function(){return i}})},683:function(t,e){const s=(t,e="get",s={})=>{const i="/api/"+t,n={method:e.toUpperCase(),headers:{"Content-Type":"application/json","X-CSRFToken":document.querySelector("[name=csrfmiddlewaretoken]")?.value||""}};if(s.params){const t=new URLSearchParams(s.params),e=i.includes("?")?"&":"?";n.url=i+e+t.toString()}else n.url=i;return s.data&&["POST","PUT","PATCH"].includes(n.method)&&(n.body=JSON.stringify(s.data)),fetch(n.url,n).then(t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json().then(t=>({data:t}))})};e.A={getCategoryList(){return s("plugin/choice/categories/","get")},createCategory(t){return s("plugin/choice/categories/","post",{data:t})},updateCategory(t,e){return s(`plugin/choice/categories/${t}/`,"put",{data:e})},deleteCategory(t){return s(`plugin/choice/categories/${t}/`,"delete")},getTagList(){return s("plugin/choice/tags/","get")},createTag(t){return s("plugin/choice/tags/","post",{data:t})},updateTag(t,e){return s(`plugin/choice/tags/${t}/`,"put",{data:e})},deleteTag(t){return s(`plugin/choice/tags/${t}/`,"delete")},getQuestionList(t){return s("plugin/choice/questions/","get",{params:t})},getQuestionDetail(t){return s(`plugin/choice/questions/${t}/`,"get")},createQuestion(t){return s("plugin/choice/questions/","post",{data:t})},updateQuestion(t,e){return s(`plugin/choice/questions/${t}/`,"put",{data:e})},deleteQuestion(t){return s(`plugin/choice/questions/${t}/`,"delete")},submitAnswer(t){return s("plugin/choice/submissions/","post",{data:t})},getSubmissionList(t){return s("plugin/choice/submissions/","get",{params:t})},getWrongQuestionList(t){return s("plugin/choice/wrong-questions/","get",{params:t})},addToWrongQuestions(t){return s("plugin/choice/wrong-questions/","post",{data:t})},removeFromWrongQuestions(t){return s(`plugin/choice/wrong-questions/${t}/`,"delete")},updateWrongQuestionNote(t,e){return s(`plugin/choice/wrong-questions/${t}/`,"put",{data:e})},getQuestionStats(){return s("plugin/choice/statistics/","get")},importQuestions(t){return s("plugin/choice/import/","post",{data:t,headers:{"Content-Type":"multipart/form-data"}})},exportQuestions(t){return s("plugin/choice/export/","get",{params:t,responseType:"blob"})},downloadTemplate(t){return s("plugin/choice/template/","get",{params:{format:t},responseType:"blob"})},batchOperation(t){return s("plugin/choice/batch/","post",{data:t})},getImportHistory(t){return s("plugin/choice/import-history/","get",{params:t})}}}}]);
//# sourceMappingURL=227.675af984c4f61ae61fb7.chunk.js.map