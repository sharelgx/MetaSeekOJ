"use strict";(this.webpackChunkChoiceQuestionPlugin=this.webpackChunkChoiceQuestionPlugin||[]).push([[662],{486:function(t,e,i){function s(t,e,i,s,o,a,n,r){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=i,c._compiled=!0),s&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),n?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},c._ssrRegister=l):o&&(l=r?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var g=c.beforeCreate;c.beforeCreate=g?[].concat(g,l):[l]}return{exports:t,options:c}}i.d(e,{A:function(){return s}})},662:function(t,e,i){i.r(e),i.d(e,{default:function(){return n}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"choice-question-list"},[e("Panel",{attrs:{shadow:""}},[e("div",{attrs:{slot:"title"},slot:"title"},[e("Icon",{attrs:{type:"ios-list"}}),t._v("\n      选择题列表\n      "),e("Badge",{staticStyle:{"margin-left":"10px"},attrs:{count:t.total}})],1),t._v(" "),e("div",{staticClass:"filter-section"},[e("Row",{attrs:{gutter:10}},[e("Col",{attrs:{span:6}},[e("Input",{attrs:{placeholder:"搜索题目标题或内容",clearable:""},on:{"on-enter":t.getQuestionList},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[e("Icon",{attrs:{slot:"prefix",type:"ios-search"},slot:"prefix"})],1)],1),t._v(" "),e("Col",{attrs:{span:4}},[e("Select",{attrs:{placeholder:"选择分类",clearable:""},model:{value:t.selectedCategory,callback:function(e){t.selectedCategory=e},expression:"selectedCategory"}},t._l(t.categories,function(i){return e("Option",{key:i.id,attrs:{value:i.id}},[t._v("\n              "+t._s(i.name)+"\n            ")])}),1)],1),t._v(" "),e("Col",{attrs:{span:4}},[e("Select",{attrs:{placeholder:"选择标签",clearable:""},model:{value:t.selectedTag,callback:function(e){t.selectedTag=e},expression:"selectedTag"}},t._l(t.tags,function(i){return e("Option",{key:i.id,attrs:{value:i.id}},[e("Tag",{attrs:{color:i.color}},[t._v(t._s(i.name))])],1)}),1)],1),t._v(" "),e("Col",{attrs:{span:3}},[e("Select",{attrs:{placeholder:"难度",clearable:""},model:{value:t.selectedDifficulty,callback:function(e){t.selectedDifficulty=e},expression:"selectedDifficulty"}},[e("Option",{attrs:{value:"1"}},[t._v("简单")]),t._v(" "),e("Option",{attrs:{value:"2"}},[t._v("中等")]),t._v(" "),e("Option",{attrs:{value:"3"}},[t._v("困难")])],1)],1),t._v(" "),e("Col",{attrs:{span:3}},[e("Select",{attrs:{placeholder:"题型",clearable:""},model:{value:t.selectedType,callback:function(e){t.selectedType=e},expression:"selectedType"}},[e("Option",{attrs:{value:"single"}},[t._v("单选题")]),t._v(" "),e("Option",{attrs:{value:"multiple"}},[t._v("多选题")])],1)],1),t._v(" "),e("Col",{attrs:{span:4}},[e("Button",{attrs:{type:"primary"},on:{click:t.getQuestionList}},[t._v("搜索")]),t._v(" "),e("Button",{staticStyle:{"margin-left":"8px"},on:{click:t.resetFilter}},[t._v("重置")])],1)],1)],1),t._v(" "),e("Table",{attrs:{columns:t.columns,data:t.questions,loading:t.loading},on:{"on-row-click":t.goToQuestion}}),t._v(" "),e("div",{staticClass:"pagination"},[e("Page",{attrs:{total:t.total,"page-size":t.pageSize,current:t.currentPage,"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":t.handlePageChange,"on-page-size-change":t.handlePageSizeChange}})],1)],1)],1)};s._withStripped=!0;var o=i(683),a={name:"ChoiceQuestionList",data(){return{loading:!1,questions:[],categories:[],tags:[],total:0,currentPage:1,pageSize:20,keyword:"",selectedCategory:null,selectedTag:null,selectedDifficulty:null,selectedType:null,columns:[{title:"ID",key:"_id",width:80,align:"center"},{title:"题目",key:"title",minWidth:200,render:(t,e)=>t("div",[t("div",{style:{fontWeight:"bold",marginBottom:"4px"}},e.row.title),t("div",{style:{fontSize:"12px",color:"#999"},domProps:{innerHTML:e.row.content.substring(0,100)+"..."}})])},{title:"分类",key:"category",width:120,render:(t,e)=>t("span",e.row.category?e.row.category.name:"-")},{title:"标签",key:"tags",width:150,render:(t,e)=>e.row.tags&&0!==e.row.tags.length?t("div",e.row.tags.map(e=>t("Tag",{props:{color:e.color},style:{marginRight:"4px"}},e.name))):t("span","-")},{title:"难度",key:"difficulty",width:80,align:"center",render:(t,e)=>{const i={1:{text:"简单",color:"success"},2:{text:"中等",color:"warning"},3:{text:"困难",color:"error"}}[e.row.difficulty];return t("Tag",{props:{color:i.color}},i.text)}},{title:"题型",key:"question_type",width:80,align:"center",render:(t,e)=>t("span","single"===e.row.question_type?"单选":"多选")},{title:"分值",key:"score",width:80,align:"center"},{title:"创建时间",key:"create_time",width:150,render:(t,e)=>t("span",this.$moment(e.row.create_time).format("YYYY-MM-DD HH:mm"))}]}},mounted(){this.init()},methods:{async init(){await Promise.all([this.getCategoryList(),this.getTagList(),this.getQuestionList()])},async getCategoryList(){try{const t=await o.A.getCategoryList();this.categories=t.data.data}catch(t){console.error("获取分类列表失败:",t)}},async getTagList(){try{const t=await o.A.getTagList();this.tags=t.data.data}catch(t){console.error("获取标签列表失败:",t)}},async getQuestionList(){this.loading=!0;try{const t={offset:(this.currentPage-1)*this.pageSize,limit:this.pageSize};this.keyword&&(t.keyword=this.keyword),this.selectedCategory&&(t.category=this.selectedCategory),this.selectedTag&&(t.tag=this.selectedTag),this.selectedDifficulty&&(t.difficulty=this.selectedDifficulty),this.selectedType&&(t.type=this.selectedType);const e=await o.A.getQuestionList(t);this.questions=e.data.data.results,this.total=e.data.data.total}catch(t){this.$Message.error("获取题目列表失败"),console.error(t)}finally{this.loading=!1}},resetFilter(){this.keyword="",this.selectedCategory=null,this.selectedTag=null,this.selectedDifficulty=null,this.selectedType=null,this.currentPage=1,this.getQuestionList()},handlePageChange(t){this.currentPage=t,this.getQuestionList()},handlePageSizeChange(t){this.pageSize=t,this.currentPage=1,this.getQuestionList()},goToQuestion(t){this.$router.push({name:"choice-question-detail",params:{id:t._id}})}}},n=(0,i(486).A)(a,s,[],!1,null,"0c94462c",null).exports},683:function(t,e){const i=(t,e="get",i={})=>{const s="/api/"+t,o={method:e.toUpperCase(),headers:{"Content-Type":"application/json","X-CSRFToken":document.querySelector("[name=csrfmiddlewaretoken]")?.value||""}};if(i.params){const t=new URLSearchParams(i.params),e=s.includes("?")?"&":"?";o.url=s+e+t.toString()}else o.url=s;return i.data&&["POST","PUT","PATCH"].includes(o.method)&&(o.body=JSON.stringify(i.data)),fetch(o.url,o).then(t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json().then(t=>({data:t}))})};e.A={getCategoryList(){return i("plugin/choice/categories/","get")},createCategory(t){return i("plugin/choice/categories/","post",{data:t})},updateCategory(t,e){return i(`plugin/choice/categories/${t}/`,"put",{data:e})},deleteCategory(t){return i(`plugin/choice/categories/${t}/`,"delete")},getTagList(){return i("plugin/choice/tags/","get")},createTag(t){return i("plugin/choice/tags/","post",{data:t})},updateTag(t,e){return i(`plugin/choice/tags/${t}/`,"put",{data:e})},deleteTag(t){return i(`plugin/choice/tags/${t}/`,"delete")},getQuestionList(t){return i("plugin/choice/questions/","get",{params:t})},getQuestionDetail(t){return i(`plugin/choice/questions/${t}/`,"get")},createQuestion(t){return i("plugin/choice/questions/","post",{data:t})},updateQuestion(t,e){return i(`plugin/choice/questions/${t}/`,"put",{data:e})},deleteQuestion(t){return i(`plugin/choice/questions/${t}/`,"delete")},submitAnswer(t){return i("plugin/choice/submissions/","post",{data:t})},getSubmissionList(t){return i("plugin/choice/submissions/","get",{params:t})},getWrongQuestionList(t){return i("plugin/choice/wrong-questions/","get",{params:t})},addToWrongQuestions(t){return i("plugin/choice/wrong-questions/","post",{data:t})},removeFromWrongQuestions(t){return i(`plugin/choice/wrong-questions/${t}/`,"delete")},updateWrongQuestionNote(t,e){return i(`plugin/choice/wrong-questions/${t}/`,"put",{data:e})},getQuestionStats(){return i("plugin/choice/statistics/","get")},importQuestions(t){return i("plugin/choice/import/","post",{data:t,headers:{"Content-Type":"multipart/form-data"}})},exportQuestions(t){return i("plugin/choice/export/","get",{params:t,responseType:"blob"})},downloadTemplate(t){return i("plugin/choice/template/","get",{params:{format:t},responseType:"blob"})},batchOperation(t){return i("plugin/choice/batch/","post",{data:t})},getImportHistory(t){return i("plugin/choice/import-history/","get",{params:t})}}}}]);
//# sourceMappingURL=662.917ed01bfdbf8fb94855.chunk.js.map